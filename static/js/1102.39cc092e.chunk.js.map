{"version":3,"file":"static/js/1102.39cc092e.chunk.js","mappings":"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","sources":["pages/CalendarPage.tsx","services/calendar.service.ts"],"sourcesContent":["import React, { useEffect, useState, useRef, useMemo } from 'react';\r\nimport FullCalendar from '@fullcalendar/react';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport { Modal, Button, Form, Input, Select, DatePicker, Tag, Tooltip, Space, Tabs } from 'antd';\r\nimport { fetchCalendarEvents, createCalendarEvent, updateCalendarEvent, deleteCalendarEvent, CalendarEvent } from '../services/calendar.service';\r\nimport { PlusOutlined, EditOutlined, DeleteOutlined, CalendarOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport { message } from 'antd';\r\nimport { educationEvents } from './EducationPage';\r\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore';\r\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\r\nimport courses from '../data/real_courses.json';\r\ndayjs.extend(isSameOrBefore);\r\ndayjs.extend(isSameOrAfter);\r\n\r\nconst eventColors = {\r\n  personal: '#1976d2',\r\n  public: '#ff9800',\r\n  education: '#ede7f6',\r\n};\r\n\r\nconst elegantLink = {\r\n  color: '#6c38a1',\r\n  fontWeight: 500,\r\n  textDecoration: 'underline',\r\n  transition: 'color 0.15s',\r\n};\r\nconst elegantLinkHover = {\r\n  color: '#4b256e',\r\n};\r\n\r\nfunction truncate(str: string, max: number) {\r\n  return str.length > max ? str.slice(0, max - 1) + '…' : str;\r\n}\r\n\r\nfunction parseCourseDate(dateTime: string) {\r\n  // Пример: \"19.06.2025, четверг, 11:00\" => 2025-06-19T11:00\r\n  const match = dateTime.match(/(\\d{2})\\.(\\d{2})\\.(\\d{4}).*?(\\d{2}):(\\d{2})/);\r\n  if (match) {\r\n    const [_, d, m, y, h, min] = match;\r\n    return `${y}-${m}-${d}T${h}:${min}`;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nfunction renderEventContent(eventInfo: any) {\r\n  const { event } = eventInfo;\r\n  const isEducation = event.extendedProps?.isEducation;\r\n  const isCourse = event.extendedProps?.isCourse;\r\n  if (isEducation) {\r\n    return (\r\n      <Tooltip\r\n        title={\r\n          <div style={{ minWidth: 220 }}>\r\n            <div style={{ fontWeight: 700, fontSize: 15, marginBottom: 4 }}>{event.title}</div>\r\n            <div style={{ color: '#888', fontSize: 13 }}>{event.extendedProps.dateText || event.extendedProps.dateTime || event.startStr}</div>\r\n            {event.extendedProps.place && <div style={{ color: '#1976d2', fontSize: 13, margin: '4px 0' }}>{event.extendedProps.place}</div>}\r\n            {event.extendedProps.description && <div style={{ fontSize: 13, margin: '4px 0' }}>{event.extendedProps.description}</div>}\r\n            {event.extendedProps.link && <a href={event.extendedProps.link} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#7c3aed', fontWeight: 600, opacity: 0.8 }}>Подробнее</a>}\r\n          </div>\r\n        }\r\n      >\r\n        <span style={{\r\n          background: isCourse ? '#e0f7fa' : eventColors.education,\r\n          color: '#333',\r\n          fontWeight: 500,\r\n          maxWidth: 110,\r\n          display: 'inline-block',\r\n          whiteSpace: 'nowrap',\r\n          overflow: 'hidden',\r\n          textOverflow: 'ellipsis',\r\n          fontSize: 14,\r\n          padding: '0 2px',\r\n          borderRadius: 6,\r\n          transition: 'color 0.15s',\r\n        }}>{event.title}</span>\r\n      </Tooltip>\r\n    );\r\n  }\r\n  // Обычные события\r\n  return <span>{truncate(event.title, 22)}</span>;\r\n}\r\n\r\nconst CalendarPage: React.FC = () => {\r\n  const [events, setEvents] = useState<CalendarEvent[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editingEvent, setEditingEvent] = useState<CalendarEvent | null>(null);\r\n  const [form] = Form.useForm();\r\n  const [activeTab, setActiveTab] = useState<'personal' | 'public'>('personal');\r\n  const [currentMonth, setCurrentMonth] = useState(dayjs());\r\n  const calendarRef = useRef<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadEvents();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (calendarRef.current && calendarRef.current.getApi) {\r\n      const api = calendarRef.current.getApi();\r\n      if (api) {\r\n        setCurrentMonth(dayjs(api.getDate()));\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const loadEvents = async () => {\r\n    setLoading(true);\r\n    const data = await fetchCalendarEvents();\r\n    setEvents(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  // Фильтрация дублей по title+start\r\n  function getUniqueEvents(events: CalendarEvent[]) {\r\n    const seen = new Set<string>();\r\n    return events.filter(e => {\r\n      const key = `${e.title.trim()}|${dayjs(e.start).toISOString()}`;\r\n      if (seen.has(key)) return false;\r\n      seen.add(key);\r\n      return true;\r\n    });\r\n  }\r\n\r\n  // Фильтрация по типу события\r\n  function getFilteredEvents() {\r\n    return getUniqueEvents(events).filter(e =>\r\n      activeTab === 'personal' ? e.type === 'personal' : e.type === 'public'\r\n    );\r\n  }\r\n\r\n  // Получить события для календаря (включая educationEvents для public)\r\n  function getCalendarEvents() {\r\n    const baseEvents = getUniqueEvents(events).filter(e =>\r\n      activeTab === 'personal' ? e.type === 'personal' : e.type === 'public'\r\n    ).map(e => ({ ...e, id: e.id.toString() }));\r\n    if (activeTab === 'public') {\r\n      // Преобразуем educationEvents к формату FullCalendar\r\n      const eduEvents = educationEvents.map((e, idx) => ({\r\n        id: `edu-${idx}`,\r\n        title: e.title,\r\n        start: e.startDate,\r\n        end: e.endDate,\r\n        backgroundColor: eventColors.education,\r\n        borderColor: eventColors.education,\r\n        extendedProps: { ...e, isEducation: true },\r\n      }));\r\n      // Добавляем курсы\r\n      const courseEvents = courses.map((c, idx) => ({\r\n        id: `course-${idx}`,\r\n        title: c.title,\r\n        start: parseCourseDate(c.dateTime),\r\n        end: undefined,\r\n        backgroundColor: '#e0f7fa',\r\n        borderColor: '#e0f7fa',\r\n        extendedProps: { ...c, isEducation: true, isCourse: true },\r\n      }));\r\n      return [...baseEvents, ...eduEvents, ...courseEvents];\r\n    }\r\n    return baseEvents;\r\n  }\r\n\r\n  const handleDateSelect = (selectInfo: any) => {\r\n    setEditingEvent(null);\r\n    setModalOpen(true);\r\n    setTimeout(() => {\r\n      form.resetFields();\r\n      form.setFieldsValue({\r\n        start: dayjs(selectInfo.startStr),\r\n        end: dayjs(selectInfo.endStr),\r\n        type: 'personal',\r\n      });\r\n    }, 0);\r\n  };\r\n\r\n  const handleEventClick = (clickInfo: any) => {\r\n    const event = events.find(e => e.id === Number(clickInfo.event.id));\r\n    if (event) {\r\n      setEditingEvent(event);\r\n      form.setFieldsValue({\r\n        ...event,\r\n        start: dayjs(event.start),\r\n        end: event.end ? dayjs(event.end) : undefined,\r\n      });\r\n      setModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleModalOk = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      console.log('values', values);\r\n      const payload = {\r\n        ...values,\r\n        start: values.start.format('YYYY-MM-DDTHH:mm:ss'),\r\n        end: values.end ? values.end.format('YYYY-MM-DDTHH:mm:ss') : undefined,\r\n        type: values.type || 'personal',\r\n      };\r\n      console.log('payload', payload);\r\n      if (editingEvent) {\r\n        await updateCalendarEvent(editingEvent.id, payload);\r\n      } else {\r\n        await createCalendarEvent(payload);\r\n      }\r\n      setModalOpen(false);\r\n      form.resetFields();\r\n      loadEvents();\r\n    } catch (err) {\r\n      // Показываем подробное сообщение об ошибке\r\n      // @ts-ignore\r\n      message.error(err?.response?.data?.message || err.message || 'Ошибка');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (editingEvent) {\r\n      try {\r\n        await deleteCalendarEvent(editingEvent.id);\r\n        setModalOpen(false);\r\n        form.resetFields();\r\n        loadEvents();\r\n      } catch (err) {\r\n        // Показываем подробное сообщение об ошибке\r\n        // @ts-ignore\r\n        message.error(err?.response?.data?.message || err.message || 'Ошибка');\r\n      }\r\n    }\r\n  };\r\n\r\n  const monthEvents = useMemo(() => {\r\n    const monthStart = currentMonth.startOf('month').startOf('day');\r\n    const monthEnd = currentMonth.endOf('month').endOf('day');\r\n    return educationEvents.filter((e: any) => {\r\n      const start = dayjs(e.startDate).startOf('day');\r\n      const end = e.endDate ? dayjs(e.endDate).endOf('day') : start;\r\n      // Событие попадает в месяц, если его диапазон дат пересекается с диапазоном месяца (включительно)\r\n      return start.isSameOrBefore(monthEnd) && end.isSameOrAfter(monthStart);\r\n    });\r\n  }, [currentMonth, educationEvents]);\r\n\r\n  const monthCourses = useMemo(() => {\r\n    const monthStart = currentMonth.startOf('month').startOf('day');\r\n    const monthEnd = currentMonth.endOf('month').endOf('day');\r\n    return courses.filter((c: any) => {\r\n      const start = dayjs(parseCourseDate(c.dateTime)).startOf('day');\r\n      return start.isSameOrBefore(monthEnd) && start.isSameOrAfter(monthStart);\r\n    });\r\n  }, [currentMonth, courses]);\r\n\r\n  return (\r\n    <div style={{ padding: 32, background: 'var(--background-color)', minHeight: '100vh' }}>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 24 }}>\r\n        <Space>\r\n          <CalendarOutlined style={{ fontSize: 32, color: '#1976d2' }} />\r\n          <span style={{ fontSize: 28, fontWeight: 700 }}>Календарь событий</span>\r\n        </Space>\r\n        <Button type=\"primary\" icon={<PlusOutlined />} size=\"large\" onClick={() => {\r\n          setEditingEvent(null);\r\n          setModalOpen(true);\r\n          setTimeout(() => {\r\n            form.resetFields();\r\n          }, 0);\r\n        }}>\r\n          Добавить событие\r\n        </Button>\r\n      </div>\r\n      <Tabs\r\n        activeKey={activeTab}\r\n        onChange={key => setActiveTab(key as 'personal' | 'public')}\r\n        items={[\r\n          {\r\n            key: 'personal',\r\n            label: 'Мои мероприятия',\r\n          },\r\n          {\r\n            key: 'public',\r\n            label: 'Все события',\r\n          },\r\n        ]}\r\n        style={{ marginBottom: 24 }}\r\n      />\r\n      <FullCalendar\r\n        ref={calendarRef}\r\n        plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n        initialView=\"dayGridMonth\"\r\n        headerToolbar={{ left: 'prev,next today', center: 'title', right: 'dayGridMonth,timeGridWeek,timeGridDay' }}\r\n        events={getCalendarEvents().map(e => {\r\n          const isEducation = (e as any).extendedProps && (e as any).extendedProps.isEducation;\r\n          return {\r\n            ...e,\r\n            title: isEducation ? e.title : truncate(e.title, 30),\r\n          };\r\n        })}\r\n        selectable\r\n        select={handleDateSelect}\r\n        eventClick={handleEventClick}\r\n        height=\"auto\"\r\n        eventContent={renderEventContent}\r\n        locale=\"ru\"\r\n        datesSet={arg => setCurrentMonth(dayjs(arg.view.currentStart))}\r\n      />\r\n      {/* Список мероприятий текущего месяца */}\r\n      {activeTab === 'public' && (() => {\r\n        return monthEvents.length > 0 && (\r\n          <div style={{ marginTop: 32, background: 'var(--card-background)', borderRadius: 14, boxShadow: '0 2px 12px #e6eaf1', padding: 24 }}>\r\n            <div style={{ fontWeight: 700, fontSize: 18, marginBottom: 16 }}>Мероприятия этого месяца</div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 14 }}>\r\n              {monthEvents.map((e: any, idx: number) => (\r\n                <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n                  <CalendarOutlined style={{ color: eventColors.education, fontSize: 22 }} />\r\n                  <div style={{ flex: 1 }}>\r\n                    <div style={{ fontWeight: 600, fontSize: 16 }}>{e.title}</div>\r\n                    <div style={{ color: '#888', fontSize: 14 }}>{e.dateText || e.startDate}</div>\r\n                    {e.place && <div style={{ color: '#1976d2', fontSize: 14 }}>{e.place}</div>}\r\n                  </div>\r\n                  {e.link && (\r\n                    <a\r\n                      href={e.link}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      style={elegantLink}\r\n                      onMouseOver={e => (e.currentTarget.style.color = elegantLinkHover.color)}\r\n                      onMouseOut={e => (e.currentTarget.style.color = elegantLink.color)}\r\n                    >\r\n                      Подробнее\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {/* Список вебинаров (курсов) этого месяца */}\r\n            {monthCourses.length > 0 && (\r\n              <div style={{ marginTop: 32 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 18, marginBottom: 16 }}>Вебинары этого месяца</div>\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: 14 }}>\r\n                  {monthCourses.map((c: any, idx: number) => (\r\n                    <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: 16 }}>\r\n                      <CalendarOutlined style={{ color: '#e0f7fa', fontSize: 22 }} />\r\n                      <div style={{ flex: 1 }}>\r\n                        <div style={{ fontWeight: 600, fontSize: 16 }}>{c.title}</div>\r\n                        <div style={{ color: '#888', fontSize: 14 }}>{c.dateTime}</div>\r\n                      </div>\r\n                      {c.link && (\r\n                        <a\r\n                          href={c.link}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          style={elegantLink}\r\n                          onMouseOver={e => (e.currentTarget.style.color = elegantLinkHover.color)}\r\n                          onMouseOut={e => (e.currentTarget.style.color = elegantLink.color)}\r\n                        >\r\n                          Смотреть\r\n                        </a>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })()}\r\n      <Modal\r\n        open={modalOpen}\r\n        onCancel={() => { setModalOpen(false); form.resetFields(); }}\r\n        onOk={handleModalOk}\r\n        title={editingEvent ? 'Редактировать событие' : 'Новое событие'}\r\n        okText={editingEvent ? 'Сохранить' : 'Создать'}\r\n        footer={[\r\n          editingEvent && <Button key=\"delete\" danger icon={<DeleteOutlined />} onClick={handleDelete}>Удалить</Button>,\r\n          <Button key=\"cancel\" onClick={() => { setModalOpen(false); form.resetFields(); }}>Отмена</Button>,\r\n          <Button key=\"ok\" type=\"primary\" onClick={handleModalOk}>{editingEvent ? 'Сохранить' : 'Создать'}</Button>,\r\n        ]}\r\n        destroyOnClose\r\n      >\r\n        <Form form={form} layout=\"vertical\">\r\n          <Form.Item name=\"title\" label=\"Название\" rules={[{ required: true, message: 'Введите название' }]}><Input placeholder=\"Название события\" /></Form.Item>\r\n          <Form.Item name=\"description\" label=\"Описание\"><Input.TextArea placeholder=\"Описание события\" autoSize /></Form.Item>\r\n          <Form.Item name=\"type\" label=\"Тип\" rules={[{ required: true }]}><Select><Select.Option value=\"personal\">Личное</Select.Option><Select.Option value=\"public\">Общее</Select.Option></Select></Form.Item>\r\n          <Form.Item name=\"start\" label=\"Начало\" rules={[{ required: true, message: 'Укажите дату и время' }]}><DatePicker showTime format=\"YYYY-MM-DD HH:mm\" style={{ width: '100%' }} /></Form.Item>\r\n          <Form.Item name=\"end\" label=\"Окончание\"><DatePicker showTime format=\"YYYY-MM-DD HH:mm\" style={{ width: '100%' }} /></Form.Item>\r\n        </Form>\r\n      </Modal>\r\n      <div style={{ marginTop: 32 }}>\r\n        <Tag color={eventColors.personal} style={{ fontSize: 16, padding: '4px 12px' }}>Личное событие</Tag>\r\n        <Tag color={eventColors.public} style={{ fontSize: 16, padding: '4px 12px', marginLeft: 12 }}>Общее мероприятие</Tag>\r\n      </div>\r\n      <style>{`\r\n        @media (max-width: 767px) {\r\n          .calendar-main {\r\n            flex-direction: column !important;\r\n            gap: 16px !important;\r\n            padding: 12px !important;\r\n          }\r\n          .ant-btn, .ant-input, .ant-select {\r\n            font-size: 18px !important;\r\n            height: 48px !important;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarPage; ","import api from './api';\r\n\r\nexport type CalendarEvent = {\r\n  id: number;\r\n  title: string;\r\n  description?: string;\r\n  start: string;\r\n  end?: string;\r\n  type: 'personal' | 'public';\r\n  relatedObjectId?: number;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n};\r\n\r\nexport async function fetchCalendarEvents(): Promise<CalendarEvent[]> {\r\n  const res = await api.get<CalendarEvent[]>('/api/calendar');\r\n  return res.data;\r\n}\r\n\r\nexport async function createCalendarEvent(event: Partial<CalendarEvent>): Promise<CalendarEvent> {\r\n  const res = await api.post<CalendarEvent>('/api/calendar', event);\r\n  return res.data;\r\n}\r\n\r\nexport async function updateCalendarEvent(id: number, event: Partial<CalendarEvent>): Promise<CalendarEvent> {\r\n  const res = await api.put<CalendarEvent>(`/calendar/${id}`, event);\r\n  return res.data;\r\n}\r\n\r\nexport async function deleteCalendarEvent(id: number): Promise<void> {\r\n  await api.delete(`/calendar/${id}`);\r\n} "],"names":["dayjs","isSameOrBefore","isSameOrAfter","eventColors","elegantLink","color","fontWeight","textDecoration","transition","elegantLinkHover","truncate","str","max","length","slice","parseCourseDate","dateTime","match","_","d","m","y","h","min","renderEventContent","eventInfo","_event$extendedProps","_event$extendedProps2","event","isEducation","extendedProps","isCourse","_jsx","_Tooltip","title","_jsxs","style","minWidth","children","fontSize","marginBottom","dateText","startStr","place","margin","description","link","href","target","rel","opacity","background","maxWidth","display","whiteSpace","overflow","textOverflow","padding","borderRadius","CalendarPage","events","setEvents","useState","loading","setLoading","modalOpen","setModalOpen","editingEvent","setEditingEvent","form","_Form","useForm","activeTab","setActiveTab","currentMonth","setCurrentMonth","calendarRef","useRef","useEffect","loadEvents","current","getApi","api","getDate","async","data","get","fetchCalendarEvents","getUniqueEvents","seen","Set","filter","e","key","trim","start","toISOString","has","add","handleModalOk","values","validateFields","console","log","payload","format","end","undefined","type","id","put","updateCalendarEvent","post","createCalendarEvent","resetFields","err","_err$response","_err$response$data","_message","error","response","message","monthEvents","useMemo","monthStart","startOf","monthEnd","endOf","educationEvents","startDate","endDate","monthCourses","courses","c","minHeight","alignItems","justifyContent","_Space","CalendarOutlined","_Button","icon","PlusOutlined","size","onClick","setTimeout","_Tabs","activeKey","onChange","items","label","FullCalendar","ref","plugins","dayGridPlugin","timeGridPlugin","interactionPlugin","initialView","headerToolbar","left","center","right","baseEvents","map","toString","eduEvents","idx","backgroundColor","borderColor","courseEvents","getCalendarEvents","selectable","select","selectInfo","setFieldsValue","endStr","eventClick","clickInfo","find","Number","height","eventContent","locale","datesSet","arg","view","currentStart","marginTop","boxShadow","flexDirection","gap","flex","onMouseOver","currentTarget","onMouseOut","_Modal","open","onCancel","onOk","okText","footer","danger","DeleteOutlined","delete","deleteCalendarEvent","_err$response2","_err$response2$data","destroyOnClose","layout","Item","name","rules","required","_Input","placeholder","TextArea","autoSize","_Select","Option","value","_DatePicker","showTime","width","_Tag","marginLeft"],"sourceRoot":""}