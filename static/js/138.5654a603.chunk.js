"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[138],{138:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(6051),s=n(9472),i=n(2261),a=n(1686),l=n(7332),c=n(7419),o=n(6317),d=n(1645),x=n(6658),h=n(5297),p=n(5043),u=n(3847),g=n(6625),m=n(6393),j=n(7078),A=n(579);const{Title:y,Text:f}=h.A,{Search:v}=x.A,w=()=>{var e;const[t,n]=(0,p.useState)([]),[x,h]=(0,p.useState)(!1),[f,w]=(0,p.useState)(""),[b,k]=(0,p.useState)(!1),[S,C]=(0,p.useState)("\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"),[T,L]=(0,p.useState)(""),z=(0,p.useContext)(g.cy);(0,p.useEffect)(()=>{(async()=>{h(!0),w("");try{var e;let t=[];t="director"===(null===z||void 0===z||null===(e=z.user)||void 0===e?void 0:e.role)?await(0,m.kZ)():await(0,m.Lf)(),n(t)}catch(t){w("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432."),console.error(t)}finally{h(!1)}})()},[null===z||void 0===z?void 0:z.token]);const $=["new","negotiation","contract","deposit"],F=t.filter(e=>"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"===S?$.includes(e.status):"\u0423\u0434\u0430\u0447\u043d\u044b\u0435 \u0441\u0434\u0435\u043b\u043a\u0438"===S?"success"===e.status:"\u041e\u0442\u043a\u0430\u0437\u0430\u043b\u0438\u0441\u044c"!==S||"refused"===e.status).filter(e=>e.name.toLowerCase().includes(T.toLowerCase()));return(0,A.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,A.jsxs)(c.A,{justify:"space-between",align:"middle",children:[(0,A.jsx)(d.A,{children:(0,A.jsx)(y,{level:2,style:{margin:0},children:"director"===(null===z||void 0===z||null===(e=z.user)||void 0===e?void 0:e.role)?"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430":"\u041c\u043e\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"})}),(0,A.jsx)(d.A,{children:(0,A.jsx)(o.Ay,{"data-testid":"client-add-btn",type:"primary",icon:(0,A.jsx)(u.A,{}),onClick:()=>k(!0),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"})})]}),(0,A.jsx)(v,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432...",value:T,onChange:e=>L(e.target.value),allowClear:!0,autoFocus:!0}),(0,A.jsx)(l.A,{options:["\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435","\u0423\u0434\u0430\u0447\u043d\u044b\u0435 \u0441\u0434\u0435\u043b\u043a\u0438","\u041e\u0442\u043a\u0430\u0437\u0430\u043b\u0438\u0441\u044c"],value:S,onChange:C,block:!0}),x?(0,A.jsx)(a.A,{size:"large"}):f?(0,A.jsx)(i.A,{message:f,type:"error",showIcon:!0}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(y,{level:4,children:S}),(0,A.jsx)(c.A,{gutter:[16,16],className:"staggered-list",children:F.length>0?F.map(e=>(0,A.jsx)(d.A,{xs:24,sm:12,md:8,children:(0,A.jsx)(j.A,{client:e})},e.id)):(0,A.jsx)(d.A,{span:24,children:(0,A.jsx)(s.A,{description:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b.",style:{marginTop:60}})})})]}),(0,A.jsx)("style",{children:"\n        @media (max-width: 767px) {\n          .clients-filters {\n            flex-direction: column !important;\n            gap: 8px !important;\n            padding: 12px !important;\n          }\n          .client-card-col {\n            flex: 0 0 100% !important;\n            max-width: 100% !important;\n          }\n          .ant-btn {\n            font-size: 18px !important;\n            height: 48px !important;\n          }\n        }\n        @media (max-width: 991px) and (min-width: 768px) {\n          .client-card-col {\n            flex: 0 0 50% !important;\n            max-width: 50% !important;\n          }\n        }\n      "})]})}},6393:(e,t,n)=>{n.d(t,{BK:()=>i,Lf:()=>s,kZ:()=>a});var r=n(6291);const s=async e=>{const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[n,r]=e;void 0!==r&&null!==r&&""!==r&&t.append(n,r.toString())});const n=await r.Ay.get(`/api/clients?${t.toString()}`);return Array.isArray(n.data)?n.data:n.data&&Array.isArray(n.data.clients)?n.data.clients:[]},i=async e=>s({agentId:e}),a=async()=>(await r.Ay.get("/api/clients/agency")).data},7078:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(9073),s=n(6051),i=n(5520),a=n(6399),l=n(5964),c=n(9126),o=n(5297),d=n(5043),x=n(3359),h=n(3722),p=n(7534),u=n(5388),g=n(6011),m=n(579);const{Text:j,Title:A}=o.A,y={new:{text:"\u041d\u043e\u0432\u044b\u0439",color:"blue"},negotiation:{text:"\u041f\u0435\u0440\u0435\u0433\u043e\u0432\u043e\u0440\u044b",color:"orange"},contract:{text:"\u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442",color:"purple"},deposit:{text:"\u0417\u0430\u0434\u0430\u0442\u043e\u043a",color:"cyan"},success:{text:"\u0423\u0441\u043f\u0435\u0445",color:"green"},refused:{text:"\u041e\u0442\u043a\u0430\u0437",color:"red"}},f=e=>{let{client:t}=e;const n=(0,m.jsx)(c.A,{children:(0,m.jsx)(c.A.Item,{children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"},"1")}),o=y[t.status];return(0,m.jsx)(r.A,{hoverable:!0,style:{borderRadius:"16px"},actions:[(0,m.jsx)(x.A,{},"edit")],children:(0,m.jsxs)(s.A,{direction:"vertical",style:{width:"100%"},children:[(0,m.jsxs)(s.A,{children:[(0,m.jsx)(l.A,{size:48,icon:(0,m.jsx)(h.A,{})}),(0,m.jsxs)("div",{"data-testid":`client-card-${t.id}`,children:[(0,m.jsx)(A,{level:5,style:{margin:0},children:t.name}),(0,m.jsx)(i.A,{overlay:n,trigger:["click"],children:(0,m.jsxs)(a.A,{color:o.color,style:{cursor:"pointer",marginTop:"4px"},children:[o.text," \u25be"]})})]})]}),(0,m.jsxs)(s.A,{direction:"vertical",style:{marginTop:16},children:[(0,m.jsxs)(s.A,{children:[(0,m.jsx)(p.A,{}),(0,m.jsx)(j,{children:t.phone}),(()=>{const{telegramUsername:e,whatsappNumber:n}=t;return(0,m.jsxs)(m.Fragment,{children:[e&&(0,m.jsx)("a",{href:`https://t.me/${e.replace(/^@/,"")}`,target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)("img",{src:"/telegram-icon.svg",alt:"Telegram",style:{width:22,height:22,marginLeft:6},loading:"lazy"})}),n&&(0,m.jsx)("a",{href:`https://wa.me/${n.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)("img",{src:"/whatsapp-icon.svg",alt:"WhatsApp",style:{width:22,height:22,marginLeft:6},loading:"lazy"})})]})})()]}),(0,m.jsxs)(s.A,{children:[(0,m.jsx)(u.A,{}),(0,m.jsx)(j,{children:t.email})]}),(0,m.jsxs)(s.A,{children:[(0,m.jsx)(g.A,{}),(0,m.jsx)(j,{underline:!0,style:{color:"#1890ff",cursor:"pointer"},children:"3-\u043a\u043e\u043c\u043d\u0430\u0442\u043d\u0430\u044f \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430, 78 \u043c\xb2"})]})]})]})})};function v(e,t){return e.client.id===t.client.id&&e.client.updatedAt===t.client.updatedAt}const w=d.memo(f,v)}}]);
//# sourceMappingURL=138.5654a603.chunk.js.map