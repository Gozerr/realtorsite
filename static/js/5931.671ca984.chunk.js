"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5931],{4773:(e,r,s)=>{s.d(r,{BD:()=>x,E$:()=>g,iD:()=>m,Be:()=>h,kz:()=>u,xw:()=>y,r7:()=>p});var a=s(6291);function t(){navigator.userAgent;const e=`${navigator.platform}-${navigator.language}-${Intl.DateTimeFormat().resolvedOptions().timeZone}-${Date.now()}`;let r=0;for(let s=0;s<e.length;s++){r=(r<<5)-r+e.charCodeAt(s),r&=r}return Math.abs(r).toString(36)}function l(){navigator.userAgent;const e=navigator.platform,r=navigator.language,s=Intl.DateTimeFormat().resolvedOptions().timeZone,a=n(),t=`${e}-${r}-${s}-${a.browser}-${a.version}`;let l=0;for(let n=0;n<t.length;n++){l=(l<<5)-l+t.charCodeAt(n),l&=l}return Math.abs(l).toString(36)}function n(){const e=navigator.userAgent;return e.includes("Chrome")?{browser:"Chrome",version:i(e,"Chrome")}:e.includes("Firefox")?{browser:"Firefox",version:i(e,"Firefox")}:e.includes("Safari")&&!e.includes("Chrome")?{browser:"Safari",version:i(e,"Safari")}:e.includes("Edge")?{browser:"Edge",version:i(e,"Edge")}:e.includes("Opera")?{browser:"Opera",version:i(e,"Opera")}:{browser:"Unknown",version:"Unknown"}}function i(e,r){const s=e.match(new RegExp(`${r}/([\\d.]+)`));return s?s[1]:"Unknown"}function o(){const e=navigator.userAgent,r=(navigator.platform,navigator.language),s=Intl.DateTimeFormat().resolvedOptions().timeZone,a=function(){const e=navigator.userAgent;return/Mobile|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"mobile":/Tablet|iPad/i.test(e)?"tablet":"desktop"}(),i=n();return{deviceId:t(),deviceFingerprint:l(),userAgent:e,screenResolution:"unknown",timezone:s,language:r,deviceType:a,browser:i.browser,browserVersion:i.version}}async function d(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c IP \u0430\u0434\u0440\u0435\u0441:",e),"unknown"}}async function c(){try{const e=await fetch("https://ipapi.co/json/"),r=await e.json();return`${r.city}, ${r.country_name}`}catch(e){return console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e:",e),"unknown"}}const m=async(e,r)=>{try{const s=await async function(){const e=o(),[r,s]=await Promise.all([d(),c()]);return{...e,ipAddress:r,location:s}}();return(await a.Ay.post("/api/auth/login",{...e,deviceInfo:s},r)).data}catch(s){return(await a.Ay.post("/api/auth/login",e,r)).data}},u=async e=>(await a.Ay.post("/api/auth/register",e,{headers:{"Content-Type":"multipart/form-data"}})).data,p=async e=>(await a.Ay.patch("/api/users/profile",e)).data,g=async e=>(await a.Ay.get("/api/users/profile",{headers:e?{Authorization:`Bearer ${e}`}:void 0})).data;async function h(){try{const e=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(!e.ok)return null;return(await e.json()).access_token||null}catch{return null}}const x=async e=>(await a.Ay.post("/api/auth/forgot-password",{email:e})).data,y=async(e,r)=>(await a.Ay.post("/api/auth/reset-password",{token:e,newPassword:r})).data},5931:(e,r,s)=>{s.r(r),s.d(r,{default:()=>Y});var a=s(6909),t=s(9073),l=s(8354),n=s(2261),i=s(6317),o=s(7419),d=s(1515),c=s(6553),m=s(1645),u=s(2019),p=s(6658),g=s(4717),h=s(5297),x=s(5043),y=s(3847),j=s(4471),v=s(132),A=s(4228),f=s(9123),w=s(4457),b=s.n(w),F=s(6625),C=s(4773),k=s(6291);const I=JSON.parse('["\u041d\u0418\u041a\u0410\u0421","\u042d\u0442\u0430\u0436\u0438","\u0412\u0435\u043a\u0442\u043e\u0440-\u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c","\u041c\u0435\u0442\u0440\u043e","Rich Life Estate","\u0416\u0435\u043c\u0447\u0443\u0436\u0438\u043d\u0430","\u0423\u043c\u043d\u0430\u044f \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c","\u041d\u043e\u0432\u044b\u0439 \u042f\u0440\u043e\u0441\u043b\u0430\u0432\u043b\u044c","\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043b\u044e\u0434\u0438","MakLeR","\u041a\u0432\u0430\u0434\u0440\u0430\u0442","\u0410\u0440\u0431\u0430\u0442","\u0412 \u043e\u0434\u0438\u043d \u043a\u043b\u0438\u043a","\u0421\u0430\u043c\u043e\u043b\u0435\u0442 \u041f\u043b\u044e\u0441","\u041f\u0440\u043e\u0444\u0438\u0441 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c","\u041e\u043b\u0438\u043c\u043f","\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u0430","\u041a\u043e\u043d\u0442\u0438\u043d\u0435\u043d\u0442 \u041f\u043b\u044e\u0441","\u0422\u0421-\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c\u044e","Impuls Estate","\u042f\u0440\u043e\u0441\u043b\u0430\u0432 \u041c\u0443\u0434\u0440\u044b\u0439","\u0413\u0430\u043b\u0435\u0440\u0435\u044f","\u0421\u043c\u0435\u043d\u0438\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0443.\u0440\u0443","\u0414\u043e\u043c\u0438\u043d\u043a","\u0412\u0430\u0432\u0438\u043b\u043e\u043d","\u041a\u0438\u0442 \u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c","\u0420\u0438\u0442\u043c \u0433\u043e\u0440\u043e\u0434\u0430","\u0410\u041d\u041a","\u041f\u0440\u043e\u043c\u0420\u0435\u0441\u0443\u0440\u0441\u041c\u0435\u043d\u0435\u0434\u0436\u043c\u0435\u043d\u0442","Ar Development","\u041a\u043e\u043c\u043f\u0430\u0441","M2 Group","\u0413\u0435\u043e\u041c\u0435\u0442\u0440\u0438\u044f","\u042f\u0440\u0418\u043d\u0444\u043e\u0440\u043c\u0411\u044e\u0440\u043e","\u0414\u043e\u043c\u0438\u043d\u043e","\u041a\u0443\u0440\u0430\u043d\u0442\u044b","Dream Estate","\u0417\u0430\u0432\u043e\u043b\u0436\u044c\u0435","\u042d\u043a\u0441\u043f\u0435\u0440\u0442\u044b76","\u0421\u0444\u0435\u0440\u0430","\u0412\u043e\u043b\u0436\u0441\u043a\u0430\u044f \u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c","\u0420\u0443\u0441\u0441\u043a\u0430\u044f \u0416\u0438\u043b\u0438\u0449\u043d\u0430\u044f \u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f","\u0417\u043d\u0430\u043c\u0435\u043d\u0441\u043a\u0438\u0435 \u0432\u043e\u0440\u043e\u0442\u0430","\u042d\u043b\u0438\u0442\u043d\u044b\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b","\u041c\u0438\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432","\u041d\u043e\u0432\u043e\u0441\u0435\u043b\u044c\u0435","\u041a\u043e\u043d\u0441\u0443\u043b-\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u043b\u044c","\u042d\u0434-\u0413\u0430\u0440","\u0412\u0438\u0442\u0442\u0430","\u0412\u0430\u0448 \u0432\u044b\u0431\u043e\u0440","\u041c\u0438\u0440 \u043a\u0432\u0430\u0440\u0442\u0438\u0440","\u0413\u0430\u0440\u0430\u043d\u0442\u042a","\u042d\u0442\u0430\u043b\u043e\u043d \u042d\u0441\u0442\u0435\u0439\u0442","\u0418\u043d\u0444\u043e","\u0428\u0430\u043d\u0441","\u0410\u043d\u0438\u043a","\u0413\u043e\u0440\u043e\u0434\u0441\u043a\u0438\u0435 \u043e\u0433\u043d\u0438"]');var N=s(3722),P=s(7534),S=s(9145),T=s(579);const{TextArea:$}=p.A,{Title:E,Text:q}=h.A,_=e=>{let{visible:r,onClose:s}=e;const[t]=g.A.useForm(),[l,n]=(0,x.useState)(!1);return(0,T.jsxs)(a.A,{title:(0,T.jsx)("div",{style:{textAlign:"center"},children:(0,T.jsxs)(E,{level:3,style:{margin:0},children:[(0,T.jsx)(f.A,{style:{marginRight:8}}),"\u0421\u043b\u0443\u0436\u0431\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"]})}),open:r,onCancel:s,footer:null,width:600,centered:!0,children:[(0,T.jsx)("div",{style:{marginBottom:24},children:(0,T.jsx)(q,{type:"secondary",children:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443, \u0438 \u043d\u0430\u0448 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"})}),(0,T.jsxs)(g.A,{form:t,layout:"vertical",onFinish:async e=>{n(!0);try{await(0,S.bd)(e),u.Ay.success("\u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438. \u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f."),t.resetFields(),s()}catch(r){console.error("Error creating support request:",r),u.Ay.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.")}finally{n(!1)}},requiredMark:!1,children:[(0,T.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,T.jsx)(g.A.Item,{name:"lastName",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e"}],style:{flex:1},children:(0,T.jsx)(p.A,{prefix:(0,T.jsx)(N.A,{}),placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",size:"large"})}),(0,T.jsx)(g.A.Item,{name:"firstName",label:"\u0418\u043c\u044f",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}],style:{flex:1},children:(0,T.jsx)(p.A,{prefix:(0,T.jsx)(N.A,{}),placeholder:"\u0418\u043c\u044f",size:"large"})}),(0,T.jsx)(g.A.Item,{name:"middleName",label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}],style:{flex:1},children:(0,T.jsx)(p.A,{prefix:(0,T.jsx)(N.A,{}),placeholder:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",size:"large"})})]}),(0,T.jsx)(g.A.Item,{name:"phone",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"},{pattern:/^\+?[0-9\s\-\(\)]+$/,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}],children:(0,T.jsx)(p.A,{prefix:(0,T.jsx)(P.A,{}),placeholder:"+7 (999) 123-45-67",size:"large"})}),(0,T.jsx)(g.A.Item,{name:"problem",label:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443"}],children:(0,T.jsx)($,{rows:6,placeholder:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u044b \u0441\u0442\u043e\u043b\u043a\u043d\u0443\u043b\u0438\u0441\u044c \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u043e\u0439...",size:"large"})}),(0,T.jsx)(g.A.Item,{style:{marginBottom:0,textAlign:"center"},children:(0,T.jsx)(i.Ay,{type:"primary",htmlType:"submit",loading:l,size:"large",style:{width:200,height:48,fontSize:16,fontWeight:500},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"})})]})]})};var z=s(5388),V=s(8617);const{Text:O}=h.A,D=e=>{let{visible:r,onClose:s}=e;const[t]=g.A.useForm(),[l,n]=(0,x.useState)(!1),[o,d]=(0,x.useState)("email"),[c,m]=(0,x.useState)("");return(0,T.jsx)(a.A,{title:"email"===o?"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",open:r,onCancel:()=>{s(),t.resetFields(),d("email")},footer:null,width:400,children:"email"===o?(0,T.jsxs)(g.A,{form:t,onFinish:async e=>{n(!0);try{await(0,C.BD)(e.email),m(e.email),d("reset"),u.Ay.success("\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0432\u0430\u0448 email")}catch(a){var r,s;const e=(null===a||void 0===a||null===(r=a.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430";u.Ay.error(e)}finally{n(!1)}},layout:"vertical",children:[(0,T.jsx)(g.A.Item,{name:"email",label:"Email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"},{type:"email",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}],children:(0,T.jsx)(p.A,{prefix:(0,T.jsx)(z.A,{}),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 email",size:"large"})}),(0,T.jsx)(g.A.Item,{children:(0,T.jsx)(i.Ay,{type:"primary",htmlType:"submit",loading:l,block:!0,size:"large",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438"})}),(0,T.jsx)("div",{style:{textAlign:"center",marginTop:16},children:(0,T.jsx)(O,{type:"secondary",children:"\u041d\u0430 \u0432\u0430\u0448 email \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"})})]}):(0,T.jsxs)(g.A,{form:t,onFinish:async e=>{if(e.newPassword===e.confirmPassword){n(!0);try{await(0,C.xw)(e.token,e.newPassword),u.Ay.success("\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),s(),t.resetFields(),d("email")}catch(l){var r,a;const e=(null===l||void 0===l||null===(r=l.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u0431\u0440\u043e\u0441\u0435 \u043f\u0430\u0440\u043e\u043b\u044f";u.Ay.error(e)}finally{n(!1)}}else u.Ay.error("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")},layout:"vertical",children:[(0,T.jsx)(g.A.Item,{name:"token",label:"\u041a\u043e\u0434 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"}],children:(0,T.jsx)(p.A,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",size:"large"})}),(0,T.jsx)(g.A.Item,{name:"newPassword",label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).+$/,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b \u0438 \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b\u044b"}],children:(0,T.jsx)(p.A.Password,{prefix:(0,T.jsx)(V.A,{}),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large"})}),(0,T.jsx)(g.A.Item,{name:"confirmPassword",label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},e=>{let{getFieldValue:r}=e;return{validator:(e,s)=>s&&r("newPassword")!==s?Promise.reject(new Error("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")):Promise.resolve()}}],children:(0,T.jsx)(p.A.Password,{prefix:(0,T.jsx)(V.A,{}),placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large"})}),(0,T.jsx)(g.A.Item,{children:(0,T.jsx)(i.Ay,{type:"primary",htmlType:"submit",loading:l,block:!0,size:"large",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})}),(0,T.jsx)("div",{style:{textAlign:"center",marginTop:16},children:(0,T.jsxs)(O,{type:"secondary",children:["\u041a\u043e\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 ",c]})})]})})};var L=s(6213);const B=e=>{let{onSuccess:r,onError:s}=e;const a=(0,x.useRef)(null);return(0,x.useEffect)(()=>{if(document.getElementById("telegram-login-script"))return;const e=document.createElement("script");return e.id="telegram-login-script",e.src="https://telegram.org/js/telegram-widget.js?7",e.async=!0,e.setAttribute("data-telegram-login","RelatorHub_bot".replace("@","")),e.setAttribute("data-size","large"),e.setAttribute("data-radius","8"),e.setAttribute("data-userpic","true"),e.setAttribute("data-request-access","write"),e.setAttribute("data-lang","ru"),e.setAttribute("data-onauth","window.handleTelegramAuth(user)"),a.current&&(a.current.innerHTML="",a.current.appendChild(e)),window.handleTelegramAuth=async e=>{try{const s=await L.A.post("/api/auth/telegram-widget-login",e);r(s.data.token,s.data.user)}catch(a){s&&s(a)}},()=>{window.handleTelegramAuth&&delete window.handleTelegramAuth}},[r,s]),(0,T.jsx)("div",{ref:a,style:{display:"flex",justifyContent:"center",marginBottom:8}})},{Title:U,Text:M}=h.A,W=[{value:"director",label:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440"},{value:"manager",label:"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"},{value:"agent",label:"\u0410\u0433\u0435\u043d\u0442 \u043f\u043e \u043d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u0438"},{value:"private_realtor",label:"\u0427\u0430\u0441\u0442\u043d\u044b\u0439 \u0440\u0438\u044d\u043b\u0442\u043e\u0440"}],R=[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).+$/,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b \u0438 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b"}];class X extends x.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,r){console.error("RegistrationErrorBoundary caught:",e,r)}render(){return this.state.error?(0,T.jsxs)("div",{style:{color:"red",padding:24},children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",String(this.state.error)]}):this.props.children}}const G=e=>{let{name:r,mask:s,placeholder:a}=e;const t=g.A.useFormInstance(),l=g.A.useWatch(r,t);return(0,T.jsx)(b(),{mask:s,maskChar:null,value:l||"",onChange:e=>{t.setFieldValue(r,e.target.value),t.validateFields([r])},children:e=>(0,T.jsx)(p.A,{...e,placeholder:a})})},H={lastName:"",firstName:"",middleName:"",email:"",phone:"+7 (",telegramUsername:"",whatsappNumber:"+7 (",agency:void 0,agencies:[],role:"",position:"",password:"",confirmPassword:"",photo:[],documents:[],logo:[]},J=e=>{let{onSuccess:r,form:s}=e;const[a,t]=(0,x.useState)(""),l=I.map(e=>({value:e,label:e}));(0,x.useEffect)(()=>{window.__registerForm=s},[s]),(0,x.useEffect)(()=>{const e=s.getFieldsValue();console.log("Form values updated:",e)},[s]);const n=()=>{const e=s.getFieldsValue(),r=s.getFieldsError();if(console.log("=== FORM VALIDATION DEBUG ==="),console.log("All form values:",e),console.log("All form errors:",r),console.log("Current role:",a),r.some(e=>e.errors.length>0))return console.log("\u274c Form has validation errors:",r),!1;const t=["firstName","lastName","middleName","email","phone","password","confirmPassword"];console.log("Checking required fields...");for(const s of t){if(!e[s])return console.log(`\u274c Missing required field: ${s} (value: ${e[s]})`),!1;console.log(`\u2705 Field ${s}: ${e[s]}`)}if("private_realtor"===a){var l;if(!e.agencies||3!==e.agencies.length)return console.log(`\u274c Private realtor needs exactly 3 agencies, got: ${(null===(l=e.agencies)||void 0===l?void 0:l.length)||0}`),!1;console.log(`\u2705 Private realtor agencies: ${e.agencies.length}`)}else if(a&&"private_realtor"!==a){if(!e.agency)return console.log(`\u274c Non-private realtor needs agency, got: ${e.agency}`),!1;console.log(`\u2705 Agency selected: ${e.agency}`)}var n,i,o;return e.photo&&0!==e.photo.length?(console.log(`\u2705 Photo uploaded: ${e.photo.length} files`),"director"!==a&&"private_realtor"!==a||e.documents&&0!==e.documents.length?("director"!==a&&"private_realtor"!==a||console.log(`\u2705 Documents uploaded: ${(null===(o=e.documents)||void 0===o?void 0:o.length)||0} files`),console.log("\u2705 Form is valid!"),!0):(console.log(`\u274c Documents required for ${a}, got: ${(null===(i=e.documents)||void 0===i?void 0:i.length)||0} files`),!1)):(console.log(`\u274c Photo is required, got: ${(null===(n=e.photo)||void 0===n?void 0:n.length)||0} files`),!1)},h=e=>{let{form:r}=e;const s=g.A.useWatch([],r),t=r?r.getFieldsError():[],l=t.every(e=>0===e.errors.length),i=n();return(0,T.jsxs)("div",{style:{background:"#f7f7f7",border:"1px solid #eee",padding:12,marginTop:16,fontSize:12},children:[(0,T.jsx)("b",{children:"DEBUG:"}),(0,T.jsxs)("div",{children:["Values: ",(0,T.jsx)("pre",{children:JSON.stringify(s,null,2)})]}),(0,T.jsxs)("div",{children:["Errors: ",(0,T.jsx)("pre",{children:JSON.stringify(t,null,2)})]}),(0,T.jsxs)("div",{children:["Form validation errors: ",l?"\u2705 None":"\u274c Has errors"]}),(0,T.jsxs)("div",{children:["Submit button enabled: ",i?"\u2705 Yes":"\u274c No"]}),(0,T.jsxs)("div",{children:["Current role: ",a||"Not selected"]}),(0,T.jsxs)("div",{children:['Missing fields for role "',a,'":']}),(0,T.jsxs)("ul",{style:{margin:"4px 0",paddingLeft:"20px"},children:[s&&!s.password&&(0,T.jsx)("li",{children:"\u274c password"}),s&&!s.confirmPassword&&(0,T.jsx)("li",{children:"\u274c confirmPassword"}),s&&"director"===a&&!s.agency&&(0,T.jsx)("li",{children:"\u274c agency"}),s&&"director"===a&&(!s.documents||0===s.documents.length)&&(0,T.jsx)("li",{children:"\u274c documents"}),s&&"private_realtor"===a&&(!s.agencies||3!==s.agencies.length)&&(0,T.jsx)("li",{children:"\u274c agencies (need exactly 3)"}),s&&"private_realtor"===a&&(!s.documents||0===s.documents.length)&&(0,T.jsx)("li",{children:"\u274c documents"})]})]})};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(g.A,{name:"register",form:s,initialValues:H,layout:"vertical",onFinish:async e=>{try{const s=new FormData;s.append("firstName",e.firstName),s.append("lastName",e.lastName),s.append("middleName",e.middleName),s.append("email",e.email),s.append("phone",e.phone),s.append("password",e.password),s.append("role",e.role),e.telegramUsername&&s.append("telegramUsername",e.telegramUsername),e.whatsappNumber&&s.append("whatsappNumber",e.whatsappNumber),"private_realtor"===a?e.agencies.forEach(e=>s.append("agencies",e)):s.append("agencyName",e.agency),"private_realtor"!==a&&e.position&&s.append("position",e.position),e.photo&&e.photo.length>0&&e.photo[0].originFileObj&&s.append("photo",e.photo[0].originFileObj),("director"===a||"private_realtor"===a)&&e.logo&&e.logo.length>0&&e.logo[0].originFileObj&&s.append("logo",e.logo[0].originFileObj),e.documents&&e.documents.length>0&&e.documents.forEach(e=>{e.originFileObj&&s.append("documents",e.originFileObj)}),Array.from(s.entries()).forEach(e=>{console.log(e[0]+":",e[1])}),await(0,C.kz)(s);let t="";switch(a){case"director":t="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432. \u0414\u043e\u0441\u0442\u0443\u043f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043a\u0440\u044b\u0442 \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438.";break;case"agent":case"manager":t="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0443 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f. \u0414\u043e\u0441\u0442\u0443\u043f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043a\u0440\u044b\u0442 \u043f\u043e\u0441\u043b\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f.";break;case"private_realtor":t="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0430\u043c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432. \u0414\u043e\u0441\u0442\u0443\u043f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043a\u0440\u044b\u0442 \u043f\u043e\u0441\u043b\u0435 \u0432\u0441\u0435\u0445 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a.";break;default:t="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f."}u.Ay.success(t),r()}catch(l){var s,t;const e=(null===l||void 0===l||null===(s=l.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438";u.Ay.error(e),console.error("Registration error:",l)}},onFinishFailed:e=>{u.Ay.error("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439!")},requiredMark:!0,autoComplete:"off",style:{marginTop:8},onValuesChange:(e,r)=>{console.log("Form values changed:",e,"All values:",r),s.validateFields()},children:[(0,T.jsxs)(o.A,{gutter:24,children:[(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:"lastName",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e"}],children:(0,T.jsx)(p.A,{autoComplete:"off",onChange:e=>s.setFieldValue("lastName",e.target.value)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u0418\u043c\u044f",name:"firstName",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}],children:(0,T.jsx)(p.A,{autoComplete:"off",onChange:e=>s.setFieldValue("firstName",e.target.value)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",name:"middleName",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}],children:(0,T.jsx)(p.A,{autoComplete:"off",onChange:e=>s.setFieldValue("middleName",e.target.value)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}],children:(0,T.jsx)(G,{name:"phone",mask:"+7 (999) 999-99-99"})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"Telegram username",name:"telegramUsername",children:(0,T.jsx)(p.A,{placeholder:"username (\u0431\u0435\u0437 @)",autoComplete:"off",onChange:e=>s.setFieldValue("telegramUsername",e.target.value)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"WhatsApp \u043d\u043e\u043c\u0435\u0440",name:"whatsappNumber",children:(0,T.jsx)(G,{name:"whatsappNumber",mask:"+7 (999) 999-99-99",placeholder:"+7 (XXX) XXX-XX-XX"})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}],children:(0,T.jsx)(p.A,{autoComplete:"off",onChange:e=>s.setFieldValue("email",e.target.value)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u0420\u043e\u043b\u044c",name:"role",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"}],children:(0,T.jsx)(c.A,{options:W,value:a,onChange:e=>{t(e),s.setFieldValue("role",e)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"})})}),a&&"private_realtor"!==a&&"director"!==a&&(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",name:"position",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"}],children:(0,T.jsx)(c.A,{options:W.filter(e=>"private_realtor"!==e.value),onChange:e=>s.setFieldValue("position",e),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"})})}),a&&(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"private_realtor"===a?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 3 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"private_realtor"===a?"agencies":"agency",rules:[{validator:(e,r)=>{if("private_realtor"===a){if(!r||3!==r.length)return Promise.reject("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u0432\u043d\u043e 3 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430")}else if(!r)return Promise.reject("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e");return Promise.resolve()}}],children:"private_realtor"===a?(0,T.jsx)(c.A,{mode:"multiple",showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 3 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430...",options:l,filterOption:(e,r)=>{var s;return String(null!==(s=null===r||void 0===r?void 0:r.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},maxTagCount:3,onChange:e=>s.setFieldValue("agencies",e)}):(0,T.jsx)(c.A,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u043e...",options:l,filterOption:(e,r)=>{var s;return String(null!==(s=null===r||void 0===r?void 0:r.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},onChange:e=>s.setFieldValue("agency",e)})})}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:(0,T.jsx)("span",{style:{color:"#ff4d4f"},children:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"}),name:"photo",rules:[{validator:(e,r)=>r&&0!==r.length?Promise.resolve():Promise.reject("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e")}],valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:(0,T.jsx)(d.A,{listType:"picture-card",maxCount:1,beforeUpload:()=>!1,accept:"image/*",onChange:e=>s.setFieldValue("photo",e.fileList),children:(0,T.jsxs)("div",{children:[(0,T.jsx)(y.A,{})," ",(0,T.jsx)("div",{style:{marginTop:8},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]})})})}),("director"===a||"private_realtor"===a)&&(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"logo",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:(0,T.jsx)(d.A,{listType:"picture-card",maxCount:1,beforeUpload:()=>!1,accept:"image/*",onChange:e=>s.setFieldValue("logo",e.fileList),children:(0,T.jsxs)("div",{children:[(0,T.jsx)(j.A,{})," ",(0,T.jsx)("div",{style:{marginTop:8},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043b\u043e\u0433\u043e\u0442\u0438\u043f"})]})})})}),("director"===a||"private_realtor"===a)&&(0,T.jsx)(m.A,{xs:24,sm:24,children:(0,T.jsx)(g.A.Item,{label:(0,T.jsx)("span",{style:{color:"#ff4d4f"},children:"director"===a?"\u0423\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e\u0449\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)"}),name:"documents",rules:[{validator:(e,r)=>"director"!==a&&"private_realtor"!==a||r&&0!==r.length?Promise.resolve():Promise.reject("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b")}],valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:(0,T.jsxs)(d.A.Dragger,{name:"docs",maxCount:5,beforeUpload:()=>!1,accept:".pdf,.jpg,.jpeg,.png",onChange:e=>s.setFieldValue("documents",e.fileList),children:[(0,T.jsx)("p",{className:"ant-upload-drag-icon",children:(0,T.jsx)(v.A,{})})," ",(0,T.jsx)("p",{className:"ant-upload-text",children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0438\u043b\u0438 \u043a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430"})," ",(0,T.jsx)("p",{className:"ant-upload-hint",children:"PDF, JPG, PNG. \u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432."})]})})}),(0,T.jsxs)(m.A,{xs:24,sm:12,children:[(0,T.jsx)(g.A.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:R,hasFeedback:!0,children:(0,T.jsx)(p.A.Password,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",onChange:e=>s.setFieldValue("password",e.target.value)})}),(0,T.jsx)("div",{style:{fontSize:12,color:"#888",marginTop:-12,marginBottom:12},children:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b \u0438 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b (!@#$%^&* \u0438 \u0434\u0440.)"})]}),(0,T.jsx)(m.A,{xs:24,sm:12,children:(0,T.jsx)(g.A.Item,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"confirmPassword",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},e=>{let{getFieldValue:r}=e;return{validator:(e,s)=>s&&r("password")!==s?Promise.reject(new Error("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")):Promise.resolve()}}],children:(0,T.jsx)(p.A.Password,{placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",onChange:e=>s.setFieldValue("confirmPassword",e.target.value)})})})]}),(0,T.jsx)(g.A.Item,{shouldUpdate:!0,children:()=>(0,T.jsx)(i.Ay,{type:"primary",htmlType:"submit",style:{width:"100%"},disabled:!n(),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),(0,T.jsx)(h,{form:s})]})},Z=e=>{let{onSuccess:r,form:s}=e;return(0,T.jsx)(J,{onSuccess:r,form:s})},Y=()=>{const[e,r]=(0,x.useState)(!1),[s,d]=(0,x.useState)(""),[c,u]=(0,x.useState)(!1),[h,y]=(0,x.useState)(!1),[j,v]=(0,x.useState)(!1),[w]=g.A.useForm(),b=(0,x.useContext)(F.cy),[I,N]=(0,x.useState)(!1);return(0,T.jsxs)(o.A,{justify:"center",align:"middle",style:{minHeight:"100vh",margin:0,padding:0},children:[(0,T.jsx)(m.A,{xs:24,sm:24,md:24,lg:24,xl:24,style:{padding:0,margin:0},children:(0,T.jsxs)(t.A,{style:{boxShadow:"none",border:"none",maxWidth:"100vw",width:"100%",margin:0,padding:0},bodyStyle:{padding:0},children:[(0,T.jsx)(U,{level:2,style:{textAlign:"center",marginTop:24},children:"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"}),(0,T.jsx)(n.A,{message:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,T.jsx)(A.A,{style:{color:"#faad14"}}),(0,T.jsx)("span",{style:{fontWeight:500},children:"\u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438"})]}),description:(0,T.jsxs)("div",{style:{marginTop:8},children:[(0,T.jsxs)("div",{style:{margin:0,fontSize:"14px",lineHeight:"1.5"},children:[(0,T.jsx)("strong",{children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!"})," \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0432\u0430\u0448\u0438\u0445 \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 (\u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c) \u0442\u0440\u0435\u0442\u044c\u0438\u043c \u043b\u0438\u0446\u0430\u043c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u0430 \u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0439 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430."]}),(0,T.jsxs)("div",{style:{margin:"8px 0 0 0",fontSize:"13px",color:"#666"},children:["\u2022 \u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",(0,T.jsx)("br",{}),"\u2022 \u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0443 \u043a\u043e\u043b\u043b\u0435\u0433\u0430\u043c, \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u043c \u043b\u0438\u0446\u0430\u043c",(0,T.jsx)("br",{}),"\u2022 \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u043d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u0435\u0439",(0,T.jsx)("br",{}),"\u2022 \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0441\u043c\u0435\u043d\u044b \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"]})]}),type:"warning",showIcon:!1,style:{margin:"0 auto 24px auto",maxWidth:400,borderRadius:8,border:"1px solid #faad14",backgroundColor:"#fffbe6"}}),(0,T.jsxs)(g.A,{name:"login",onFinish:async e=>{r(!0),d("");try{const r=await(0,C.iD)({email:e.email,password:e.password},{withCredentials:!0});console.log("[LOGIN] access_token:",r.access_token);try{const e=JSON.parse(atob(r.access_token.split(".")[1]));console.log("[LOGIN] JWT payload:",e)}catch(n){console.warn("[LOGIN] \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u0442\u044c JWT:",n)}const s=await(0,C.E$)(r.access_token);null===b||void 0===b||b.setAuthData(r.access_token,s),(0,k.OB)()}catch(i){var s,a,t,l;let e="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443";null!==i&&void 0!==i&&null!==(s=i.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.message?e=i.response.data.message:401===(null===i||void 0===i||null===(t=i.response)||void 0===t?void 0:t.status)?e="\u041b\u043e\u0433\u0438\u043d \u0438/\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e":500===(null===i||void 0===i||null===(l=i.response)||void 0===l?void 0:l.status)?e="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435":null!==i&&void 0!==i&&i.message&&(e=i.message),d(e),console.error("Login error:",i)}finally{r(!1)}},layout:"vertical",requiredMark:!1,preserve:!1,style:{maxWidth:400,margin:"0 auto"},children:[(0,T.jsx)(g.A.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:(0,T.jsx)(p.A,{"data-testid":"login-email",autoFocus:!0})}),(0,T.jsx)(g.A.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:(0,T.jsx)(p.A.Password,{"data-testid":"login-password"})}),(0,T.jsx)("div",{style:{textAlign:"right",marginBottom:16},children:(0,T.jsx)(i.Ay,{type:"link",size:"small",onClick:()=>v(!0),style:{padding:0,height:"auto"},children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),s&&(0,T.jsx)(n.A,{message:s,type:"error",showIcon:!0,style:{marginBottom:16}}),(0,T.jsx)(g.A.Item,{children:(0,T.jsx)(i.Ay,{"data-testid":"login-submit",type:"primary",htmlType:"submit",loading:e,style:{width:"100%"},children:"\u0412\u043e\u0439\u0442\u0438"})}),(0,T.jsx)(l.A,{plain:!0,style:{margin:"16px 0"},children:"\u0438\u043b\u0438"}),(0,T.jsx)("div",{style:{textAlign:"center",margin:"16px 0"},children:(0,T.jsx)(B,{onSuccess:(e,r)=>{null===b||void 0===b||b.setAuthData(e,r),N(!1)},onError:()=>d("\u041e\u0448\u0438\u0431\u043a\u0430 Telegram \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435 \u0438\u043b\u0438 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443.")})})]}),(0,T.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[(0,T.jsx)(i.Ay,{type:"link",style:{marginRight:16},onClick:()=>u(!0),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,T.jsx)(i.Ay,{type:"link",icon:(0,T.jsx)(f.A,{}),onClick:()=>y(!0),children:"\u0421\u043b\u0443\u0436\u0431\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"})]})]})}),(0,T.jsx)(a.A,{open:c,onCancel:()=>u(!1),footer:null,centered:!1,width:"100vw",style:{top:0,padding:0,maxWidth:"100vw"},bodyStyle:{padding:0,minHeight:"100vh",background:"#fff"},maskStyle:{background:"rgba(0,0,0,0.25)"},closable:!0,children:(0,T.jsx)(X,{children:(0,T.jsx)("div",{style:{width:"100vw",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:0,margin:0},children:(0,T.jsxs)("div",{style:{width:"100%",maxWidth:900,margin:"0 auto",padding:32},children:[(0,T.jsx)(U,{level:2,style:{textAlign:"center",marginBottom:24},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,T.jsx)(n.A,{message:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,T.jsx)(A.A,{style:{color:"#faad14"}}),(0,T.jsx)("span",{style:{fontWeight:500},children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438"})]}),description:(0,T.jsxs)("div",{style:{marginTop:8},children:[(0,T.jsxs)("div",{style:{margin:0,fontSize:"14px",lineHeight:"1.5"},children:[(0,T.jsx)("strong",{children:"\u0412\u0430\u0436\u043d\u043e!"})," \u041f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435. \u041f\u043e\u043c\u043d\u0438\u0442\u0435 \u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438:"]}),(0,T.jsxs)("div",{style:{margin:"8px 0 0 0",fontSize:"13px",color:"#666"},children:["\u2022 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u0443\u0447\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",(0,T.jsx)("br",{}),"\u2022 \u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0442\u0440\u0435\u0442\u044c\u0438\u043c \u043b\u0438\u0446\u0430\u043c",(0,T.jsx)("br",{}),"\u2022 \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0434\u043e\u0437\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c",(0,T.jsx)("br",{}),"\u2022 \u041f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043e\u0431\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044c \u0432 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443"]})]}),type:"warning",showIcon:!1,style:{marginBottom:24,borderRadius:8,border:"1px solid #faad14",backgroundColor:"#fffbe6"}}),(0,T.jsx)(Z,{onSuccess:()=>u(!1),form:w})]})})})}),(0,T.jsx)(_,{visible:h,onClose:()=>y(!1)}),(0,T.jsx)(D,{visible:j,onClose:()=>v(!1)})]})}},9145:(e,r,s)=>{s.d(r,{$D:()=>m,PW:()=>i,Sr:()=>u,Vo:()=>d,_C:()=>l,bd:()=>t,eZ:()=>p,g1:()=>n,tX:()=>c,x7:()=>o});var a=s(6291);const t=async e=>(await a.Ay.post("/api/support/requests",e)).data,l=async()=>(await a.Ay.get("/api/support/requests")).data,n=async e=>(await a.Ay.patch(`/api/support/requests/${e}/assign`)).data,i=async(e,r)=>(await a.Ay.patch(`/api/support/requests/${e}/resolve`,{resolution:r})).data,o=async e=>(await a.Ay.patch(`/api/support/requests/${e}/close`)).data,d=async()=>(await a.Ay.get("/api/support/stats")).data,c=async()=>(await a.Ay.get("/api/support/agency-authorization/pending")).data,m=async e=>(await a.Ay.get(`/api/support/agency-authorization/${e}`)).data,u=async e=>(await a.Ay.patch(`/api/support/agency-authorization/${e}/approve`)).data,p=async(e,r)=>(await a.Ay.patch(`/api/support/agency-authorization/${e}/reject`,{reason:r})).data}}]);
//# sourceMappingURL=5931.671ca984.chunk.js.map