"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6948],{1579:(e,t,i)=>{i.d(t,{IR:()=>n,Xc:()=>a,Xx:()=>l,qz:()=>s,vu:()=>r});var o=i(6291);const a=async e=>{const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[i,o]=e;void 0!==o&&null!==o&&""!==o&&t.append(i,o.toString())});const i=await o.Ay.get(`/api/properties?${t.toString()}`);return Array.isArray(i.data)?i.data:i.data&&Array.isArray(i.data.properties)?i.data.properties:[]},s=async e=>(await o.Ay.get(`/api/properties/${e}`)).data,n=async e=>a({agentId:e}),l=async()=>{const e=await o.Ay.get("/api/properties?sort=createdAt_desc&limit=10");return Array.isArray(e.data)?e.data:e.data&&Array.isArray(e.data.properties)?e.data.properties:[]},r=async(e,t,i)=>(await o.Ay.patch(`/api/properties/${e}/status`,{status:t},i?{headers:{Authorization:`Bearer ${i}`}}:void 0)).data},2247:(e,t,i)=>{i.d(t,{A:()=>l});var o=i(7650),a=i(5043),s=i(4471),n=i(579);const l=e=>{let{src:t,alt:i,width:l,height:r,className:d,style:c,fallback:p="/placeholder-image.jpg",placeholder:h,onLoad:g,onError:u,lazy:y=!0,quality:f=80,preview:x=!1}=e;const[v,m]=(0,a.useState)(!0),[j,w]=(0,a.useState)(!1),[b,S]=(0,a.useState)(t);(0,a.useRef)(null);(0,a.useEffect)(()=>{S(t),w(!1),m(!0)},[t]);h||s.A;return j&&b===p?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",color:"#999",width:l||"100%",height:r||"200px",...c},className:d,children:[(0,n.jsx)(s.A,{style:{fontSize:"24px",marginRight:"8px"}}),"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e"]}):(0,n.jsxs)("div",{style:{position:"relative",width:l,height:r,...c},className:d,children:[v&&(0,n.jsx)(o.A.Image,{active:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1}}),(0,n.jsx)("img",{src:b,alt:i,width:l,height:r,style:{opacity:v?0:1,transition:"opacity 0.3s ease",width:l||"100%",height:r||"auto",...c},onLoad:()=>{m(!1),null===g||void 0===g||g()},onError:()=>{m(!1),w(!0),b!==p&&S(p),null===u||void 0===u||u()},loading:y?"lazy":void 0})]})}},3072:(e,t,i)=>{i.d(t,{Cf:()=>l,Jm:()=>h,M0:()=>g,P1:()=>s,RL:()=>d,SJ:()=>n,Yl:()=>a,am:()=>p,ic:()=>r,kT:()=>c,nk:()=>u});var o=i(6291);async function a(){try{return(await o.Ay.get("/api/selections")).data}catch(e){if(e.response&&404===e.response.status)return[];throw e}}async function s(e,t){const i=t?{Authorization:`Bearer ${t}`}:void 0;return(await o.Ay.post("/api/selections",{title:e,propertyIds:[]},i?{headers:i}:void 0)).data}async function n(e,t){const i=(await o.Ay.get(`/api/selections/${e}`)).data;if(!i.propertyIds.includes(t)){const a=[...i.propertyIds,t];await o.Ay.put(`/api/selections/${e}`,{title:i.title,propertyIds:a})}}async function l(e,t){const i=(await o.Ay.get(`/api/selections/${e}`)).data,a=i.propertyIds.filter(e=>e!==t);await o.Ay.put(`/api/selections/${e}`,{title:i.title,propertyIds:a})}async function r(e){await o.Ay.delete(`/api/selections/${e}`)}async function d(e){return(await o.Ay.get(`/api/selections/${e}`)).data}async function c(e){return(await o.Ay.get(`/api/selections/${e}/client-likes`)).data}function p(e){return`${window.location.origin}/client-selection/${e}`}async function h(e){var t;const i=await o.Ay.get(`/api/selections/${e}/pdf`,{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([i.data],{type:"application/pdf"})),s=document.createElement("a");s.href=a,s.setAttribute("download",`selection_${e}.pdf`),document.body.appendChild(s),s.click(),null===(t=s.parentNode)||void 0===t||t.removeChild(s),window.URL.revokeObjectURL(a)}async function g(e){return(await o.Ay.get(`/api/selections/client/${e}`)).data}async function u(e,t,i){await o.Ay.post(`/api/selections/client/${e}/like`,{propertyId:t,liked:i})}},5554:(e,t,i)=>{i.d(t,{A:()=>p});var o=i(6909),a=i(6317),s=i(6658),n=i(6553),l=i(2019),r=i(5043),d=i(3072),c=i(579);const p=e=>{let{open:t,propertyId:i,onClose:p,createOnly:h}=e;const[g,u]=(0,r.useState)([]),[y,f]=(0,r.useState)(),[x,v]=(0,r.useState)(""),[m,j]=(0,r.useState)(!1),[w,b]=(0,r.useState)(!1),S=localStorage.getItem("token");(0,r.useEffect)(()=>{t&&((0,d.Yl)().then(u),f(void 0),v(""))},[t]);const A=async()=>{if(x.trim()){j(!0);try{const e=await(0,d.P1)(x.trim(),S||void 0);u(t=>[...t,e]),f(e.id),v(""),l.Ay.success("\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430"),h&&p()}finally{j(!1)}}};return(0,c.jsx)(o.A,{open:t,onCancel:p,footer:null,title:h?"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443",destroyOnHidden:!0,children:(0,c.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[!h&&(0,c.jsxs)("div",{style:{marginBottom:16},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:500},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443"}),(0,c.jsx)(n.A,{style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443",value:y,onChange:f,options:g.map(e=>({label:e.title,value:e.id})),allowClear:!0})]}),(0,c.jsxs)("div",{style:{marginBottom:16},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:500},children:"\u0418\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u0443\u044e"}),(0,c.jsx)(s.A,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0438",value:x,onChange:e=>v(e.target.value),style:{width:"calc(100% - 110px)",marginRight:8},onPressEnter:A}),(0,c.jsx)(a.Ay,{type:"primary",onClick:A,disabled:!x.trim(),loading:m,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),!h&&(0,c.jsx)(a.Ay,{type:"primary",block:!0,disabled:!y,onClick:e=>{e.stopPropagation(),(async()=>{if(y&&i){b(!0);try{await(0,d.SJ)(y,i),l.Ay.success("\u041e\u0431\u044a\u0435\u043a\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443"),p()}finally{b(!1)}}})()},loading:w,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})}},6948:(e,t,i)=>{i.d(t,{A:()=>$});var o=i(6909),a=i(6651),s=i(6399),n=i(6553),l=i(6317),r=i(6051),d=i(9073),c=i(7650),p=i(2019),h=i(5297),g=i(5043),u=i(1283),y=i(6525),f=i(5534),x=i(8058),v=i(7725),m=i(3847),j=i(5554),w=i(1579),b=i(6625),S=i(3259),A=i(2247);const C={glassCard:"GlassCard_glassCard__YwNhC",fadeInUp:"GlassCard_fadeInUp__XdHKX",cardImage:"GlassCard_cardImage__BN9aa",cardContent:"GlassCard_cardContent__JxWZa",cardTitle:"GlassCard_cardTitle__yEOLO",cardMeta:"GlassCard_cardMeta__pw5Ib",cardActions:"GlassCard_cardActions__0wxcW","ant-btn":"GlassCard_ant-btn__D1-Zo",anticon:"GlassCard_anticon__7LG7f",avitoCard:"GlassCard_avitoCard__CKh9N"};var k=i(579);const{Text:z,Title:I}=h.A,R=[{value:"for_sale",label:"\u0412 \u043f\u0440\u043e\u0434\u0430\u0436\u0435",color:"green"},{value:"in_deal",label:"\u041d\u0430 \u0437\u0430\u0434\u0430\u0442\u043a\u0435",color:"orange"},{value:"reserved",label:"\u041d\u0430 \u0431\u0440\u043e\u043d\u0438",color:"blue"},{value:"sold",label:"\u041f\u0440\u043e\u0434\u0430\u043d",color:"red"}];const _=e=>{var t,i,h,z,I,_,B,$,T,X,L,M,O,F,E,H,P,D,G,U,Y;let{property:J,onStatusChange:Z,mode:q="default",onFavorite:K,onEdit:Q,onDelete:V,isFavorite:ee=!1,loading:te=!1,showActions:ie=!0,allowStatusEdit:oe=!0,style:ae}=e;const se=function(e){if(Array.isArray(e))return e;if("string"===typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}(J.photos)||J.images||[],ne=(0,u.Zp)(),[le,re]=(0,g.useState)(!1),[de,ce]=(0,g.useState)(!1),[pe,he]=(0,g.useState)(J.status),ge=(0,g.useContext)(b.cy),ue=null===ge||void 0===ge?void 0:ge.user,{isClientMode:ye}=(0,S.Q)(),[fe,xe]=((0,g.useRef)(null),(0,g.useState)(null)),[ve,me]=(0,g.useState)(!1),[je,we]=(0,g.useState)(null),[be,Se]=(0,g.useState)(null),[Ae,Ce]=(0,g.useState)(null),[ke,ze]=(0,g.useState)(!0),[Ie,Re]=(0,g.useState)(!1),[_e,Ne]=(0,g.useState)(!1),We=(null===ge||void 0===ge||null===(t=ge.user)||void 0===t||t.id,null===(i=J.agent)||void 0===i||i.id,J.id,oe&&ue&&"agent"===ue.role&&J.agent&&J.agent.id===ue.id),Be=(J.agent&&ue&&(J.agent.id,ue.id),R.find(e=>e.value===J.status)||R[0]),$e=(0,g.useCallback)(()=>{ne(`/properties/${J.id}`)},[ne,J.id]),[Te,Xe]=((0,g.useCallback)(e=>{e.stopPropagation(),null===K||void 0===K||K(J.id)},[K,J.id]),(0,g.useCallback)(e=>{e.stopPropagation(),null===Q||void 0===Q||Q(J.id)},[Q,J.id]),(0,g.useCallback)(e=>{e.stopPropagation(),null===V||void 0===V||V(J.id)},[V,J.id]),(0,g.useState)(0)),Le=(0,g.useRef)(null),Me=(0,g.useRef)({startX:0,dragging:!1,lastX:0}),Oe=e=>{if(Me.current.dragging=!0,"touches"in e){const t=e;t.touches&&t.touches.length>0&&(Me.current.startX=t.touches[0].clientX,Me.current.lastX=t.touches[0].clientX)}else{const t=e;Me.current.startX=t.clientX,Me.current.lastX=t.clientX}},Fe=e=>{if(!Me.current.dragging)return;let t;if("touches"in e){const i=e;if(!(i.touches&&i.touches.length>0))return;t=i.touches[0].clientX}else{t=e.clientX}Me.current.lastX;Me.current.lastX=t},Ee=e=>{if(!Me.current.dragging)return;let t;if(Me.current.dragging=!1,"changedTouches"in e){const i=e;if(!(i.changedTouches&&i.changedTouches.length>0))return;t=i.changedTouches[0].clientX}else if("touches"in e){const i=e;if(!(i.touches&&i.touches.length>0))return;t=i.touches[0].clientX}else{t=e.clientX}const i=t-Me.current.startX;Math.abs(i)>40&&(i<0&&Te<se.length-1&&Xe(Te+1),i>0&&Te>0&&Xe(Te-1))},He=e=>{null===e||void 0===e||e.stopPropagation(),Te>0&&Xe(Te-1)},Pe=e=>{null===e||void 0===e||e.stopPropagation(),Te<se.length-1&&Xe(Te+1)};if(te)return(0,k.jsxs)(d.A,{style:{width:300,marginBottom:16,...ae},children:[(0,k.jsx)(c.A.Image,{active:!0,style:{width:"100%",height:200}}),(0,k.jsx)(c.A,{active:!0,paragraph:{rows:3}})]});const De=J.photos&&Array.isArray(J.photos)&&J.photos[0]||"string"===typeof J.photos&&(()=>{try{const e=JSON.parse(J.photos);return Array.isArray(e)&&e[0]?e[0]:null}catch{return null}})()||"/placeholder-property.jpg",Ge=e=>{const t=Number(e);return!t||isNaN(t)?"\u2014":t.toLocaleString("ru-RU")+" \u0440\u0443\u0431"},Ue=le||Ie,Ye=()=>{if(!J.agent)return null;let{telegramUsername:e,whatsappNumber:t}=J.agent;return e&&(e=e.replace(/^@/,"")),(0,k.jsxs)(r.A,{style:{marginTop:8},children:[e&&(0,k.jsx)("a",{href:`https://t.me/${e}`,target:"_blank",rel:"noopener noreferrer",children:(0,k.jsx)("img",{src:"/telegram-icon.svg",alt:"Telegram",style:{width:24,height:24}})}),t&&(0,k.jsx)("a",{href:`https://wa.me/${t.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",children:(0,k.jsx)("img",{src:"/whatsapp-icon.svg",alt:"WhatsApp",style:{width:24,height:24}})})]})},Je=(null===(h=J.legalCheck)||void 0===h?void 0:h.status)||"\u041d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d";let Ze=(0,k.jsx)(y.A,{style:{fontSize:20,color:"#faad14"}}),qe="#faad14",Ke="\u041d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d";var Qe,Ve,et,tt,it,ot,at;return"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d"===Je?(Ze=(0,k.jsx)(y.A,{style:{fontSize:20,color:"#52c41a"}}),qe="#52c41a",Ke="\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d"):"\u041d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435"===Je&&(Ze=(0,k.jsx)(f.A,{spin:!0,style:{fontSize:20,color:"#1890ff"}}),qe="#1890ff",Ke="\u041d\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435"),"avito"===q?(0,k.jsxs)("div",{className:C.avitoCard,style:{display:"flex",flexDirection:"row",alignItems:"stretch",background:"#fff",borderRadius:12,boxShadow:"0 2px 8px #e6eaf1",minHeight:120,margin:"12px 0",padding:0,cursor:Ue?"default":"pointer",transition:"box-shadow 0.18s",width:"100%",maxWidth:"100%"},onClick:()=>ne(`/properties/${J.id}`),children:[(0,k.jsx)("div",{style:{width:100,height:100,borderRadius:10,overflow:"hidden",flexShrink:0,background:"#f5f6fa",display:"flex",alignItems:"center",justifyContent:"center",margin:14},children:(0,k.jsx)(A.A,{src:De,alt:J.title,preview:!1,width:100,height:100,style:{objectFit:"cover",width:100,height:100,borderRadius:10},lazy:!0,fallback:"/placeholder-property.jpg"})}),(0,k.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"16px 18px 16px 0",minWidth:0},children:[(0,k.jsx)("div",{style:{fontSize:20,fontWeight:800,color:"#222",lineHeight:1.1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Ge(J.price)}),(0,k.jsx)("div",{style:{fontSize:16,color:"#222",fontWeight:600,marginBottom:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},children:J.title}),(0,k.jsxs)("div",{style:{fontSize:14,color:"#888",marginBottom:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:4,lineHeight:1.2},children:[(0,k.jsx)("span",{role:"img","aria-label":"address",children:"\ud83d\udccd"})," ",J.address]}),(0,k.jsxs)("div",{style:{fontSize:14,color:"#666",marginBottom:8,display:"flex",gap:14,lineHeight:1.2},children:[(0,k.jsxs)("span",{children:[J.area," \u043c\xb2"]}),J.floor&&J.floors&&(0,k.jsxs)("span",{children:[J.floor,"/",J.floors," \u044d\u0442."]}),J.type&&(0,k.jsx)("span",{children:J.type})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,margin:"14px 0 10px 0",padding:"14px 18px",background:"#fff",borderRadius:14,boxShadow:"0 2px 12px #e6eaf133",maxWidth:420,minHeight:56},children:[(0,k.jsx)("div",{style:{fontSize:28,flexShrink:0},children:Ze}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,k.jsxs)("span",{style:{fontWeight:700,fontSize:15,color:qe,marginBottom:2},children:["\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0438\u0441\u0442\u043e\u0442\u0430: ",Ke]}),(null===(Qe=J.legalCheck)||void 0===Qe?void 0:Qe.details)&&(0,k.jsx)("span",{style:{color:"#888",fontSize:12},children:J.legalCheck.details}),(null===(Ve=J.legalCheck)||void 0===Ve?void 0:Ve.date)&&(0,k.jsx)("span",{style:{color:"#b0b6c3",fontSize:11},children:null===(et=J.legalCheck)||void 0===et?void 0:et.date})]})]}),!ye&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginTop:8},children:[(null===(tt=J.agent)||void 0===tt?void 0:tt.photo)&&(0,k.jsxs)("picture",{children:[J.agent.photo.match(/\.(jpg|jpeg|png)$/i)&&(0,k.jsx)("source",{srcSet:J.agent.photo,type:"image/jpeg"}),(0,k.jsx)("img",{src:J.agent.photo,alt:"\u0410\u0433\u0435\u043d\u0442",style:{width:32,height:32,borderRadius:"50%",objectFit:"cover",boxShadow:"0 1px 4px #e6eaf1"},loading:"lazy"})]}),(0,k.jsxs)("span",{style:{fontSize:14,color:"#888",fontWeight:500},children:[null===(it=J.agent)||void 0===it?void 0:it.firstName," ",null===(ot=J.agent)||void 0===ot?void 0:ot.lastName]}),(null===(at=J.agent)||void 0===at?void 0:at.phone)&&(0,k.jsx)("span",{style:{fontSize:14,color:"#1976d2",marginLeft:8},children:J.agent.phone})]}),Ye()]})]}),(0,k.jsx)(j.A,{open:le,propertyId:J.id,onClose:()=>re(!1)})]}):"compact"===q?(0,k.jsxs)("div",{className:C.glassCard,style:{margin:6,boxShadow:"0 2px 8px 0 rgba(10,37,64,0.06)",cursor:Ue?"default":"pointer",minWidth:0,minHeight:0,maxWidth:360},...Ue?{}:{onClick:$e},children:[(0,k.jsx)("div",{className:C.cardImage,style:{height:90,borderRadius:10,position:"relative",overflow:"hidden",userSelect:"none"},ref:Le,onMouseDown:Oe,onMouseMove:Fe,onMouseUp:Ee,onMouseLeave:Ee,onTouchStart:Oe,onTouchMove:Fe,onTouchEnd:Ee,children:se.length>1?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("img",{src:se[Te]||"/placeholder-property.jpg",alt:J.title,style:{width:"100%",height:90,objectFit:"cover",borderRadius:10,transition:"0.3s"},draggable:!1}),Te>0&&(0,k.jsx)(l.Ay,{type:"default",shape:"circle",icon:(0,k.jsx)(x.A,{}),size:"small",style:{position:"absolute",top:"50%",left:6,transform:"translateY(-50%)",zIndex:2,background:"#fff",opacity:.8},onClick:He,tabIndex:-1}),Te<se.length-1&&(0,k.jsx)(l.Ay,{type:"default",shape:"circle",icon:(0,k.jsx)(v.A,{}),size:"small",style:{position:"absolute",top:"50%",right:6,transform:"translateY(-50%)",zIndex:2,background:"#fff",opacity:.8},onClick:Pe,tabIndex:-1}),(0,k.jsx)("div",{style:{position:"absolute",bottom:6,left:0,width:"100%",display:"flex",justifyContent:"center",gap:4},children:se.map((e,t)=>(0,k.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",background:t===Te?"#1976d2":"#eee",display:"inline-block"}},t))})]}):(0,k.jsx)(A.A,{src:De,alt:J.title,preview:!1,width:"100%",height:90,style:{objectFit:"cover",borderRadius:10},lazy:!0,fallback:"/placeholder-property.jpg"})}),(0,k.jsxs)("div",{className:C.cardContent,style:{padding:"10px 12px 8px 12px"},children:[(0,k.jsx)("div",{style:{fontSize:15,fontWeight:700,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:J.title}),(0,k.jsx)("div",{style:{fontSize:13,color:"#888",marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:J.address}),(0,k.jsx)("div",{style:{fontSize:15,color:"#1976d2",fontWeight:600,marginBottom:2},children:Ge(J.price)}),(0,k.jsxs)("div",{style:{fontSize:13,color:"#666",marginBottom:2},children:[J.area," \u043c\xb2"]})]})]}):(0,k.jsxs)("div",{className:C.glassCard+(Ue?" "+C.active:""),style:{cursor:"pointer",minHeight:"compact"===q?60:120,padding:"compact"===q?8:void 0,fontSize:"compact"===q?14:void 0,...ae},onClick:$e,onMouseEnter:()=>me(!0),onMouseLeave:()=>{we(null),Se(null),Ce(null),xe(null),me(!1)},children:[(0,k.jsxs)("div",{"data-testid":`property-card-${J.id}`,children:[(0,k.jsxs)("div",{className:C.cardImage,style:{position:"relative",overflow:"hidden",userSelect:"none",borderRadius:16,height:220},ref:Le,onMouseDown:Oe,onMouseMove:Fe,onMouseUp:Ee,onMouseLeave:Ee,onTouchStart:Oe,onTouchMove:Fe,onTouchEnd:Ee,children:[se.length>1?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("img",{src:se[Te]||"/placeholder-property.jpg",alt:J.title,style:{width:"100%",height:220,objectFit:"cover",borderRadius:16,transition:"0.3s"},draggable:!1}),Te>0&&(0,k.jsx)(l.Ay,{type:"default",shape:"circle",icon:(0,k.jsx)(x.A,{}),size:"small",style:{position:"absolute",top:"50%",left:10,transform:"translateY(-50%)",zIndex:2,background:"#fff",opacity:.8},onClick:He,tabIndex:-1}),Te<se.length-1&&(0,k.jsx)(l.Ay,{type:"default",shape:"circle",icon:(0,k.jsx)(v.A,{}),size:"small",style:{position:"absolute",top:"50%",right:10,transform:"translateY(-50%)",zIndex:2,background:"#fff",opacity:.8},onClick:Pe,tabIndex:-1}),(0,k.jsx)("div",{style:{position:"absolute",bottom:10,left:0,width:"100%",display:"flex",justifyContent:"center",gap:4},children:se.map((e,t)=>(0,k.jsx)("span",{style:{width:10,height:10,borderRadius:"50%",background:t===Te?"#1976d2":"#eee",display:"inline-block"}},t))})]}):(0,k.jsx)(A.A,{src:De,alt:J.title,preview:!1,width:"100%",height:220,style:{objectFit:"cover",borderRadius:16},lazy:!0,fallback:"/placeholder-property.jpg"}),(0,k.jsxs)("div",{style:{position:"absolute",top:16,left:16,zIndex:2,display:"flex",gap:8},children:[We?(0,k.jsx)(n.A,{size:"small",value:J.status,style:{minWidth:110},onChange:async e=>{he(e),await(async e=>{ce(!1);const t=e||pe;if(t!==J.status)try{console.log("\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043d\u0430 \u0441\u043c\u0435\u043d\u0443 \u0441\u0442\u0430\u0442\u0443\u0441\u0430:",t);const e=await(0,w.vu)(J.id,t,(null===ge||void 0===ge?void 0:ge.token)||void 0);Z&&Z(J.id,e.status,e),p.Ay.success("\u0421\u0442\u0430\u0442\u0443\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!")}catch(a){var i,o;console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043c\u0435\u043d\u044b \u0441\u0442\u0430\u0442\u0443\u0441\u0430:",a);const e=(null===a||void 0===a||null===(i=a.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||a.message||"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441";p.Ay.error(e)}})(e)},options:R,onClick:e=>e.stopPropagation()}):(0,k.jsx)(s.A,{color:Be.color,style:{fontWeight:600,fontSize:13},children:Be.label}),(0,k.jsx)(s.A,{color:"purple",style:{fontWeight:600,fontSize:13},children:"\u042d\u043a\u0441\u043a\u043b\u044e\u0437\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"})]})]}),(0,k.jsxs)("div",{className:C.cardContent,style:{padding:14,display:"flex",flexDirection:"column",gap:8},children:[(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,k.jsx)("div",{style:{fontWeight:800,fontSize:18,color:"#222",lineHeight:1.1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:J.title}),(0,k.jsx)("div",{style:{fontSize:13,color:"#888",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:J.address})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,k.jsx)("div",{style:{fontSize:16,color:"#2563eb",fontWeight:700},children:Ge(J.price)}),(0,k.jsxs)("div",{style:{fontSize:13,color:"#444",fontWeight:600},children:[J.area," \u043c\xb2"]})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,fontSize:12,color:"#666",marginBottom:0},children:[void 0!==J.bedrooms&&(0,k.jsxs)("span",{children:[(0,k.jsx)("i",{className:"fas fa-bed",style:{marginRight:3}}),J.bedrooms," \u0441\u043f\u0430\u043b\u0435\u043d"]}),void 0!==J.bathrooms&&(0,k.jsxs)("span",{children:[(0,k.jsx)("i",{className:"fas fa-bath",style:{marginRight:3}}),J.bathrooms," \u0432\u0430\u043d\u043d"]}),J.type&&(0,k.jsxs)("span",{children:[(0,k.jsx)("i",{className:"fas fa-home",style:{marginRight:3}}),J.type]}),J.floor&&J.totalFloors&&(0,k.jsxs)("span",{children:[(0,k.jsx)("i",{className:"fas fa-layer-group",style:{marginRight:3}}),J.floor,"/",J.totalFloors," \u044d\u0442."]})]}),J.description&&(0,k.jsx)(W,{text:J.description,maxLines:4}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,margin:"6px 0 4px 0",padding:"7px 10px",background:"#fff",borderRadius:10,boxShadow:"0 1px 4px #e6eaf122",maxWidth:320,minHeight:32},children:[(0,k.jsx)("div",{style:{fontSize:16,flexShrink:0},children:Ze}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[(0,k.jsxs)("span",{style:{fontWeight:700,fontSize:11,color:qe,marginBottom:0},children:["\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0438\u0441\u0442\u043e\u0442\u0430: ",Ke]}),(null===(z=J.legalCheck)||void 0===z?void 0:z.details)&&(0,k.jsx)("span",{style:{color:"#888",fontSize:10},children:J.legalCheck.details}),(null===(I=J.legalCheck)||void 0===I?void 0:I.date)&&(0,k.jsx)("span",{style:{color:"#b0b6c3",fontSize:9},children:null===(_=J.legalCheck)||void 0===_?void 0:_.date})]})]}),!ye&&(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,marginTop:3,marginBottom:2},children:[(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(null===(B=J.agent)||void 0===B?void 0:B.photo)&&(0,k.jsxs)("picture",{children:[J.agent.photo.match(/\.(jpg|jpeg|png)$/i)&&(0,k.jsx)("source",{srcSet:J.agent.photo,type:"image/jpeg"}),(0,k.jsx)("img",{src:J.agent.photo,alt:"\u0410\u0433\u0435\u043d\u0442",style:{width:32,height:32,borderRadius:"50%",objectFit:"cover",boxShadow:"0 1px 4px #e6eaf1"},loading:"lazy"})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:1},children:[(0,k.jsxs)("span",{style:{fontWeight:700,fontSize:14},children:[null===($=J.agent)||void 0===$?void 0:$.firstName," ",null===(T=J.agent)||void 0===T?void 0:T.lastName]}),(null===(X=J.agent)||void 0===X||null===(L=X.agency)||void 0===L?void 0:L.name)&&(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(null===(M=J.agent)||void 0===M||null===(O=M.agency)||void 0===O?void 0:O.logo)&&(0,k.jsx)("img",{src:J.agent.agency.logo,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430",style:{width:16,height:16,objectFit:"contain",borderRadius:2}}),(0,k.jsx)("span",{style:{fontSize:12,color:"#888",fontWeight:500},children:J.agent.agency.name})]}),(0,k.jsx)("span",{style:{color:"#888",fontSize:12},children:null===(F=J.agent)||void 0===F?void 0:F.phone}),(0,k.jsx)("span",{children:Ye()})]})]}),(0,k.jsxs)("div",{className:C.cardActions,style:{display:"flex",gap:6,marginTop:0,marginBottom:0},children:[(0,k.jsx)(a.A,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0434\u0431\u043e\u0440",children:(0,k.jsx)(l.Ay,{shape:"circle",icon:(0,k.jsx)(m.A,{}),size:"large",onClick:e=>{e.stopPropagation(),re(!0)}})}),(0,k.jsx)(a.A,{title:"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c \u0430\u0433\u0435\u043d\u0442\u0443",children:(0,k.jsx)(l.Ay,{shape:"circle",icon:(0,k.jsx)(N,{}),size:"large",onClick:e=>{e.stopPropagation(),Re(!0)}})})]})]})]})]}),(0,k.jsx)(j.A,{open:le,propertyId:J.id,onClose:()=>re(!1)}),!ye&&(0,k.jsxs)(o.A,{open:Ie,onCancel:e=>{e.stopPropagation(),Re(!1)},footer:null,title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0430\u0433\u0435\u043d\u0442\u0430",afterClose:()=>{},maskClosable:!0,destroyOnClose:!0,children:[(0,k.jsxs)("div",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:[null===(E=J.agent)||void 0===E?void 0:E.firstName," ",null===(H=J.agent)||void 0===H?void 0:H.lastName]}),(null===(P=J.agent)||void 0===P||null===(D=P.agency)||void 0===D?void 0:D.name)&&(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(null===(G=J.agent)||void 0===G||null===(U=G.agency)||void 0===U?void 0:U.logo)&&(0,k.jsx)("img",{src:J.agent.agency.logo,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0430",style:{width:24,height:24,objectFit:"contain",borderRadius:4}}),(0,k.jsx)("span",{style:{fontSize:16,color:"#666"},children:J.agent.agency.name})]}),(0,k.jsx)("div",{style:{fontSize:16},children:(null===(Y=J.agent)||void 0===Y?void 0:Y.phone)||J.phone||"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})]})]})},N=()=>(0,k.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 011 1V20a1 1 0 01-1 1C10.07 21 3 13.93 3 5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.25.2 2.46.57 3.58a1 1 0 01-.24 1.01l-2.2 2.2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),W=e=>{let{text:t,maxLines:i=4}=e;const[o,a]=(0,g.useState)(!1),s=(0,g.useRef)(null),[n,r]=(0,g.useState)(!1);return g.useEffect(()=>{s.current&&r(s.current.scrollHeight>s.current.clientHeight+2)},[t,i]),(0,k.jsxs)("div",{style:{position:"relative",marginTop:4},children:[(0,k.jsx)("div",{ref:s,style:{fontSize:12,color:"#444",lineHeight:1.5,maxHeight:o?"none":1.5*i*1.1+"em",overflow:o?"visible":"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:o?"unset":i,WebkitBoxOrient:"vertical",whiteSpace:"pre-line",background:"none",padding:0},children:t}),!o&&n&&(0,k.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:32,background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, #fff 90%)",display:"flex",alignItems:"flex-end",justifyContent:"center"},children:(0,k.jsx)(l.Ay,{size:"small",type:"link",style:{fontSize:12,padding:0},onClick:()=>a(!0),children:"\u0427\u0438\u0442\u0430\u0442\u044c \u0434\u0430\u043b\u0435\u0435"})}),o&&(0,k.jsx)(l.Ay,{size:"small",type:"link",style:{fontSize:12,padding:0,marginTop:2},onClick:()=>a(!1),children:"\u0421\u043a\u0440\u044b\u0442\u044c"})]})};function B(e,t){return e.property.id===t.property.id&&e.property.updatedAt===t.property.updatedAt&&e.mode===t.mode&&e.isFavorite===t.isFavorite&&e.loading===t.loading&&e.showActions===t.showActions&&e.allowStatusEdit===t.allowStatusEdit}const $=g.memo(_,B)}}]);
//# sourceMappingURL=6948.5605a7e1.chunk.js.map