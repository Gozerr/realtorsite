/*! For license information please see 9397.69a1c342.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9397],{2155:(e,t,n)=>{n.d(t,{J:()=>u});var o=n(1686),r=n(5043),i=n(2104),a=n(4394),s=n(4773),l=n(579);const d=window.location.hostname,c=`http://${d}:3001`,p=`http://${d}:3001/api`,u=e=>{let{chatId:t,userId:n,jwt:d,propertyId:u,sellerId:f,buyerId:h,onChatIdResolved:g,hideInput:x,onlyInput:v,limitLastN:y}=e;const[m,b]=(0,r.useState)([]),[w,j]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),C=(0,r.useRef)(null),z=(0,r.useRef)(null),[W,R]=(0,r.useState)(!0),[$,D]=(0,r.useState)(t||null),[B,E]=(0,r.useState)(!1),[O,T]=(0,r.useState)(null),[H,M]=(0,r.useState)({}),L=(0,r.useRef)(null),N=(0,r.useCallback)(()=>{const e=localStorage.getItem("token"),o=(0,i.io)(c,{auth:{token:e},transports:["websocket"]});return C.current=o,o.on("connect",()=>{console.log("[ChatWidget] Socket connected",{initialChatId:t,chatId:$,userId:n,token:e,WS_URL:c})}),o.on("disconnect",async e=>{if(console.log("[ChatWidget] Socket disconnected:",e),"io server disconnect"===e||"string"===typeof e&&e.includes("jwt expired")){const e=await(0,s.Be)();e?(localStorage.setItem("token",e),N()):window.location.href="/login"}}),o.on("connect_error",async e=>{if(console.error("[ChatWidget] Socket connect_error:",e),e.message&&e.message.includes("jwt expired")){const e=await(0,s.Be)();e?(localStorage.setItem("token",e),N()):window.location.href="/login"}}),!t&&u?o.emit("getOrCreateChat",{propertyId:u},e=>{e&&e.chatId&&(D(e.chatId),o.emit("joinChat",{chatId:e.chatId}),g&&g(e.chatId))}):t&&o.emit("joinChat",{chatId:t}),o.on("receiveMessage",e=>{b(t=>[...t,e])}),o.on("typing",e=>{let{userId:t}=e;t!==n&&(A(!0),setTimeout(()=>A(!1),2e3))}),o},[t,$,n,u,g]);(0,r.useEffect)(()=>{const e=N();return()=>{e.disconnect()}},[N]),(0,r.useEffect)(()=>{$&&(R(!0),fetch(`${p}/chats/${$}/messages`,{headers:{Authorization:`Bearer ${d}`}}).then(e=>e.json()).then(e=>{b(Array.isArray(e)?e:[])}).catch(()=>b([])).finally(()=>R(!1)))},[$,d]),(0,r.useEffect)(()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)},[m]),(0,r.useEffect)(()=>{t&&t!==$&&D(t)},[t]),(0,r.useEffect)(()=>{b([])},[$,n,u]);const P=(0,r.useCallback)(()=>{var e;if(!w.trim()||!$)return;const t=f&&n!==f?f:h&&n!==h?h:void 0;console.log("[ChatWidget] Sending message:",w,{chatId:$,userId:n,toUserId:t,jwt:d,propertyId:u}),null===(e=C.current)||void 0===e||e.emit("sendMessage",{chatId:$,text:w,propertyId:u,toUserId:t,authorId:n}),j(""),k(!1),setTimeout(()=>{console.log("[ChatWidget] Refetching history after send",{chatId:$,userId:n,jwt:d}),fetch(`${p}/chats/${$}/messages`,{headers:{Authorization:`Bearer ${d}`}}).then(e=>(console.log("[ChatWidget] fetch history after send response status:",e.status),e.json())).then(e=>{Array.isArray(e)?b(e):b([])}).catch(e=>{b([]),console.error("[ChatWidget] Error fetching history after send:",e)})},200)},[w,$,n,d,u,f,h]),F=e=>{var t;(j(e.target.value),S)||(k(!0),null===(t=C.current)||void 0===t||t.emit("typing",{chatId:$,userId:n}),setTimeout(()=>k(!1),1500))},U=y&&m.length>y?m.slice(-y):m;return v?(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:0,background:"#fff",borderRadius:0},children:[(0,l.jsx)("input",{value:w,onChange:F,onKeyDown:e=>{"Enter"===e.key&&P()},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",disabled:W,style:{flex:1,borderRadius:16,background:"#fff",border:"1.5px solid #e6eaf1",fontSize:16,padding:"12px 18px"}}),(0,l.jsx)("button",{onClick:P,disabled:!w.trim()||W,style:{borderRadius:"50%",background:"#2563eb",color:"#fff",fontWeight:700,fontSize:20,width:44,height:44,border:"none",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"none",transition:"background 0.2s"},children:(0,l.jsx)(a.A,{})})]}):(0,l.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #e9f0fb 100%)",borderRadius:18,boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.10)",padding:0,minHeight:440,maxHeight:770,height:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",transition:"none",flex:1},children:[(0,l.jsxs)("div",{ref:L,style:{flex:"1 1 0%",overflowY:"auto",minHeight:0,height:"100%",position:"relative",padding:"18px 0 8px",background:"transparent"},children:[W?(0,l.jsx)(o.A,{style:{margin:"40px auto",display:"block"}}):0===U.length?(0,l.jsx)("div",{style:{color:"#bbb",fontSize:20,position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1},children:"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}):U.map(e=>{const t=e.author||(e.authorId?{id:e.authorId}:void 0),o=(null===t||void 0===t?void 0:t.id)===n;return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:o?"row-reverse":"row",alignItems:"flex-end",margin:"14px 0",padding:"0 24px",animation:"fadeInUp 0.4s"},children:[(()=>{let e=(null===t||void 0===t?void 0:t.photo)||(null===t||void 0===t?void 0:t.avatar)||void 0;return(0,l.jsxs)("div",{style:{minWidth:42,minHeight:42,margin:o?"0 0 0 14px":"0 14px 0 0"},children:[(0,l.jsx)("img",{src:e,alt:(null===t||void 0===t?void 0:t.firstName)||"?",style:{width:42,height:42,borderRadius:"50%",objectFit:"cover",background:"#f2f3f5",display:e?"block":"none",boxShadow:"0 2px 8px #e6eaf1"},onError:e=>{e.target.style.display="none"}}),!e&&(0,l.jsx)("div",{style:{width:42,height:42,borderRadius:"50%",background:"#e6eaf1",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,color:"#bbb",fontSize:18,boxShadow:"0 2px 8px #e6eaf1"},children:null!==t&&void 0!==t&&t.firstName?t.firstName[0]:"?"})]})})(),(0,l.jsxs)("div",{style:{maxWidth:480,background:o?"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)":"linear-gradient(135deg, #fff 0%, #f2f3f5 100%)",color:o?"#fff":"#222",borderRadius:o?"22px 22px 8px 22px":"22px 22px 22px 8px",padding:"16px 22px 12px 22px",fontSize:16,fontWeight:400,wordBreak:"break-word",marginLeft:0,marginRight:0,boxShadow:"0 2px 16px #e6eaf1",position:"relative",display:"flex",flexDirection:"column",minHeight:52,justifyContent:"flex-end",transition:"background 0.2s"},children:[(0,l.jsx)("span",{style:{display:"block",marginBottom:6,whiteSpace:"pre-line"},children:e.text}),(0,l.jsx)("span",{style:{fontSize:13,color:o?"#dbeafe":"#888",textAlign:"right",alignSelf:"flex-end",lineHeight:1,marginTop:2},children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},e.id)}),(0,l.jsx)("div",{ref:z}),I&&(0,l.jsx)("div",{style:{color:"#1976d2",fontSize:15,margin:"8px 0 0 28px"},children:"\u041f\u0435\u0447\u0430\u0442\u0430\u0435\u0442..."})]}),!v&&!x&&(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"14px 18px 14px 10px",background:"#f7f9fc",borderRadius:18,position:"absolute",left:0,right:0,bottom:0,zIndex:2,boxShadow:"0 -2px 16px #e6eaf1",width:"100%"},children:[(0,l.jsx)("input",{value:w,onChange:F,onKeyDown:e=>{"Enter"===e.key&&P()},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",disabled:W,style:{flex:"1 1 0%",borderRadius:16,background:"#fff",border:"1.5px solid #e6eaf1",fontSize:17,padding:"14px 20px",boxShadow:"0 2px 8px #e6eaf1",outline:"none",transition:"border 0.2s"}}),(0,l.jsx)("button",{onClick:P,disabled:!w.trim()||W,style:{borderRadius:"50%",background:"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)",color:"#fff",fontWeight:700,fontSize:22,width:48,height:48,border:"none",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px #e6eaf1",transition:"background 0.2s"},children:(0,l.jsx)(a.A,{})})]}),(0,l.jsx)("style",{children:"\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translate3d(0, 40px, 0); }\n          to { opacity: 1; transform: none; }\n        }\n        @media (max-width: 767px) {\n          .ant-spin {\n            margin: 24px auto !important;\n          }\n        }\n      "})]})}},3117:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(5043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};var i=n(3889);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}const s=(e,t)=>o.createElement(i.A,a({},e,{ref:t,icon:r}));const l=o.forwardRef(s)},4773:(e,t,n)=>{n.d(t,{BD:()=>x,E$:()=>h,iD:()=>p,Be:()=>g,kz:()=>u,xw:()=>v,r7:()=>f});var o=n(6291);function r(){navigator.userAgent;const e=`${navigator.platform}-${navigator.language}-${Intl.DateTimeFormat().resolvedOptions().timeZone}-${Date.now()}`;let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(36)}function i(){navigator.userAgent;const e=navigator.platform,t=navigator.language,n=Intl.DateTimeFormat().resolvedOptions().timeZone,o=a(),r=`${e}-${t}-${n}-${o.browser}-${o.version}`;let i=0;for(let a=0;a<r.length;a++){i=(i<<5)-i+r.charCodeAt(a),i&=i}return Math.abs(i).toString(36)}function a(){const e=navigator.userAgent;return e.includes("Chrome")?{browser:"Chrome",version:s(e,"Chrome")}:e.includes("Firefox")?{browser:"Firefox",version:s(e,"Firefox")}:e.includes("Safari")&&!e.includes("Chrome")?{browser:"Safari",version:s(e,"Safari")}:e.includes("Edge")?{browser:"Edge",version:s(e,"Edge")}:e.includes("Opera")?{browser:"Opera",version:s(e,"Opera")}:{browser:"Unknown",version:"Unknown"}}function s(e,t){const n=e.match(new RegExp(`${t}/([\\d.]+)`));return n?n[1]:"Unknown"}function l(){const e=navigator.userAgent,t=(navigator.platform,navigator.language),n=Intl.DateTimeFormat().resolvedOptions().timeZone,o=function(){const e=navigator.userAgent;return/Mobile|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"mobile":/Tablet|iPad/i.test(e)?"tablet":"desktop"}(),s=a();return{deviceId:r(),deviceFingerprint:i(),userAgent:e,screenResolution:"unknown",timezone:n,language:t,deviceType:o,browser:s.browser,browserVersion:s.version}}async function d(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c IP \u0430\u0434\u0440\u0435\u0441:",e),"unknown"}}async function c(){try{const e=await fetch("https://ipapi.co/json/"),t=await e.json();return`${t.city}, ${t.country_name}`}catch(e){return console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e:",e),"unknown"}}const p=async(e,t)=>{try{const n=await async function(){const e=l(),[t,n]=await Promise.all([d(),c()]);return{...e,ipAddress:t,location:n}}();return(await o.Ay.post("/api/auth/login",{...e,deviceInfo:n},t)).data}catch(n){return(await o.Ay.post("/api/auth/login",e,t)).data}},u=async e=>(await o.Ay.post("/api/auth/register",e,{headers:{"Content-Type":"multipart/form-data"}})).data,f=async e=>(await o.Ay.patch("/api/users/profile",e)).data,h=async e=>(await o.Ay.get("/api/users/profile",{headers:e?{Authorization:`Bearer ${e}`}:void 0})).data;async function g(){try{const e=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(!e.ok)return null;return(await e.json()).access_token||null}catch{return null}}const x=async e=>(await o.Ay.post("/api/auth/forgot-password",{email:e})).data,v=async(e,t)=>(await o.Ay.post("/api/auth/reset-password",{token:e,newPassword:t})).data},9397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var o=n(6399),r=n(1686),i=n(4522),a=n(5964),s=n(2261),l=n(6658),d=n(5297),c=n(5043),p=n(6625),u=n(2155),f=n(6525),h=n(3117),g=n(1283),x=n(579);const{Title:v}=d.A;const y=()=>{var e,t,n,d,y,m,b,w,j,S,k;const I=(0,c.useContext)(p.cy),A=(0,g.zy)(),C=(0,g.Zp)(),[z,W]=(0,c.useState)([]),[R,$]=(0,c.useState)(!0),[D,B]=(0,c.useState)(null),[E,O]=(0,c.useState)(null),[T,H]=(0,c.useState)(""),M=`http://${window.location.hostname}:3001/api`;(0,c.useEffect)(()=>{null!==I&&void 0!==I&&I.token&&($(!0),fetch(`${M}/chats`,{headers:{Authorization:`Bearer ${I.token}`}}).then(e=>e.json()).then(e=>{W(Array.isArray(e)?e:[]),O(null)}).catch(()=>{W([]),O("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0447\u0430\u0442\u043e\u0432")}).finally(()=>$(!1)))},[null===I||void 0===I?void 0:I.token]),(0,c.useEffect)(()=>{if(!I||!I.token)return;const e=new URLSearchParams(A.search),t=e.get("propertyId"),n=e.get("agentId");if(t&&n&&z.length>0){const e=z.find(e=>{var o,r;return String(null===(o=e.property)||void 0===o?void 0:o.id)===String(t)&&String(null===(r=e.seller)||void 0===r?void 0:r.id)===String(n)});e&&(B(e),C("/my-chats",{replace:!0}))}},[A.search,z,I,C]);const L=(0,c.useMemo)(()=>z.filter(e=>{var t,n,o,r,i,a,s,l;const d=T.toLowerCase();return(null===(t=e.property)||void 0===t||null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(d))||(null===(o=e.property)||void 0===o||null===(r=o.address)||void 0===r?void 0:r.toLowerCase().includes(d))||(null===(i=e.seller)||void 0===i||null===(a=i.firstName)||void 0===a?void 0:a.toLowerCase().includes(d))||(null===(s=e.buyer)||void 0===s||null===(l=s.firstName)||void 0===l?void 0:l.toLowerCase().includes(d))}),[z,T]),N=(0,c.useMemo)(()=>{const e=(e,t)=>{var n,o;const r=new Date((null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)||e.createdAt).getTime();return new Date((null===(o=t.lastMessage)||void 0===o?void 0:o.createdAt)||t.createdAt).getTime()-r};return[...L.filter(e=>{var t;return(null!==(t=e.unreadCount)&&void 0!==t?t:0)>0}).sort(e),...L.filter(e=>{var t;return!(null!==(t=e.unreadCount)&&void 0!==t&&t)}).sort(e)]},[L]);if(null===I||void 0===I||!I.user)return(0,x.jsx)("div",{children:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"});var P,F,U;D&&null!==I&&void 0!==I&&I.user&&I.token&&console.log("[MyChatsPage] ChatWidget params:",{chatId:D.id,userId:I.user.id,jwt:I.token,propertyId:null===(P=D.property)||void 0===P?void 0:P.id,sellerId:null===(F=D.seller)||void 0===F?void 0:F.id,buyerId:null===(U=D.buyer)||void 0===U?void 0:U.id});return(0,x.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 40px)",background:"#f8fafc",minHeight:600},children:[(0,x.jsxs)("div",{style:{width:370,background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #e6eaf1",margin:"32px 0 32px 32px",padding:0,display:"flex",flexDirection:"column",minWidth:0},children:[(0,x.jsxs)("div",{style:{padding:"28px 28px 12px 28px",borderBottom:"1px solid #f0f0f0"},children:[(0,x.jsx)(v,{level:2,style:{margin:0,fontSize:28,fontWeight:800,letterSpacing:-1},children:"\u0427\u0430\u0442\u044b"}),(0,x.jsx)(l.A.Search,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u0447\u0430\u0442\u043e\u0432...",value:T,onChange:e=>H(e.target.value),style:{marginTop:18,borderRadius:8,fontSize:16,padding:"10px 16px"},allowClear:!0})]}),(0,x.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"0 0 12px 0"},children:(0,x.jsxs)(r.A,{spinning:R,children:[E&&(0,x.jsx)(s.A,{type:"error",message:E,style:{margin:12}}),!R&&0===N.length&&!E&&(0,x.jsx)(s.A,{type:"info",message:"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0447\u0430\u0442\u043e\u0432",style:{margin:12}}),(0,x.jsx)(i.A,{itemLayout:"horizontal",dataSource:N,style:{border:"none",background:"transparent",padding:0},renderItem:e=>{var t,n,o;let r=function(e){if(Array.isArray(e))return e;if("string"===typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}(null===(t=e.property)||void 0===t?void 0:t.photos)[0];return r=r?r.startsWith("/uploads/objects/")?r.replace("/uploads/objects/","/uploads/objects/thumbnails/"):`/uploads/objects/thumbnails/${r}`:"/placeholder-property.jpg",(0,x.jsx)(i.A.Item,{style:{cursor:"pointer",padding:"16px 10px",borderBottom:"1px solid #f0f0f0",background:(null===D||void 0===D?void 0:D.id)===e.id?"#f5f7fa":void 0,transition:"background 0.2s",minHeight:56,borderRadius:10,marginBottom:0},onClick:()=>B(e),children:(0,x.jsx)(i.A.Item.Meta,{avatar:(0,x.jsx)(a.A,{size:38,src:r,style:{background:"#e6eaf1",border:"2px solid #fff",objectFit:"cover"}}),title:(0,x.jsx)("div",{style:{fontWeight:700,fontSize:16,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:(null===(n=e.property)||void 0===n?void 0:n.title)||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"}),description:(0,x.jsx)("div",{style:{fontSize:14,color:"#555",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:(null===(o=e.property)||void 0===o?void 0:o.address)||""})})},e.id)}})]})})]}),(0,x.jsx)("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",margin:"32px 32px 32px 0",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px #e6eaf1",overflow:"hidden",minHeight:0},children:D?(0,x.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[(0,x.jsxs)("div",{style:{background:"#f9fafb",borderRadius:"18px 18px 0 0",minHeight:56,padding:"18px 32px 10px 32px",borderBottom:"1.5px solid #e6eaf1",marginBottom:0,boxShadow:"0 2px 8px #e6eaf1",display:"flex",flexDirection:"column",gap:2},children:[(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[((e,t,n)=>{let o=(null===(e=D.seller)||void 0===e?void 0:e.photo)||(null===(t=D.seller)||void 0===t?void 0:t.avatar)||void 0;return(0,x.jsx)(a.A,{size:34,src:o,style:{background:"#f2f3f5",fontWeight:700,flexShrink:0,objectFit:"cover"},children:!o&&null!==(n=D.seller)&&void 0!==n&&n.firstName?D.seller.firstName[0]:"A"})})(),(0,x.jsxs)("span",{style:{fontWeight:700,fontSize:16,color:"#222"},children:[null===(e=D.seller)||void 0===e?void 0:e.lastName," ",null===(t=D.seller)||void 0===t?void 0:t.firstName]})]}),(null===(n=D.property)||void 0===n?void 0:n.status)&&(0,x.jsx)(o.A,{color:"for_sale"===D.property.status?"green":"in_deal"===D.property.status?"orange":"reserved"===D.property.status?"blue":"sold"===D.property.status?"red":"default",style:{fontWeight:600,fontSize:15,padding:"2px 16px",borderRadius:8,margin:"0 auto"},children:"for_sale"===D.property.status?"\u0412 \u043f\u0440\u043e\u0434\u0430\u0436\u0435":"in_deal"===D.property.status?"\u041d\u0430 \u0437\u0430\u0434\u0430\u0442\u043a\u0435":"reserved"===D.property.status?"\u041d\u0430 \u0431\u0440\u043e\u043d\u0438":"sold"===D.property.status?"\u041f\u0440\u043e\u0434\u0430\u043d":D.property.status}),(0,x.jsx)("div",{style:{fontWeight:600,fontSize:16,color:"#2563eb",maxWidth:340,textAlign:"right",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(0,x.jsx)("a",{href:null!==(d=D.property)&&void 0!==d&&d.id?`/properties/${D.property.id}`:"#",style:{color:"#2563eb",fontWeight:700,fontSize:16,textDecoration:"none",transition:"color 0.2s",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:e=>{var t;null!==(t=D.property)&&void 0!==t&&t.id||e.preventDefault()},children:null===(y=D.property)||void 0===y?void 0:y.title})})]}),(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,marginTop:2},children:[(0,x.jsx)("div",{style:{color:"#2563eb",fontSize:15,fontWeight:500},children:(null===(m=D.seller)||void 0===m?void 0:m.phone)&&(0,x.jsx)("a",{href:`tel:${D.seller.phone}`,style:{color:"#2563eb",fontSize:15,textDecoration:"none",fontWeight:500},title:"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c",children:D.seller.phone})}),(null===(b=D.property)||void 0===b?void 0:b.legalCheck)&&(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,background:"#f4f6fa",borderRadius:8,padding:"2px 12px",fontSize:14,fontWeight:600,color:"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e"===D.property.legalCheck.status?"#52c41a":"#faad14"},children:[(0,x.jsx)(f.A,{style:{fontSize:18,color:"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e"===D.property.legalCheck.status?"#52c41a":"#faad14"}}),(0,x.jsx)("span",{children:D.property.legalCheck.status})]}),(0,x.jsx)("div",{style:{color:"#6b7280",fontSize:15,textAlign:"right",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:340},children:null===(w=D.property)||void 0===w?void 0:w.address})]})]}),(0,x.jsx)("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:I.user&&I.token&&(0,x.jsx)(u.J,{chatId:D.id,userId:I.user.id,jwt:I.token,propertyId:null===(j=D.property)||void 0===j?void 0:j.id,sellerId:null===(S=D.seller)||void 0===S?void 0:S.id,buyerId:null===(k=D.buyer)||void 0===k?void 0:k.id})})]}):(0,x.jsxs)("div",{style:{textAlign:"center",color:"#bbb",marginTop:120},children:[(0,x.jsx)(h.A,{style:{fontSize:64,marginBottom:24}}),(0,x.jsx)("div",{style:{fontSize:22,fontWeight:500,marginBottom:8},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442 \u0441\u043b\u0435\u0432\u0430, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),(0,x.jsx)("div",{style:{fontSize:16},children:"\u0417\u0434\u0435\u0441\u044c \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0438 \u0438 \u0444\u043e\u0440\u043c\u0430 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"})]})})]})}}}]);
//# sourceMappingURL=9397.69a1c342.chunk.js.map